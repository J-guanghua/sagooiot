import{d as e,h as a,a1 as l,k as t,aa as o,R as i,S as n,j as r,ah as s,ar as p,o as d,Y as u,a8 as m,W as b,T as c,a as f,V as g,Z as w,b as y,X as h}from"./vue.1709626208081.js";import{_,b as D,E as T,h as V}from"./index.1709626208081.js";const k=e({name:"apiV1SystemLoginLogList",setup(){const{proxy:e}=r(),i=a(),{admin_login_status:n}=e.useDict("admin_login_status"),s=l({ids:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,dateRange:[],operName:"",businessType:"",status:-1,title:""}}}),p=a(!1),d=a({}),u=()=>{s.tableData.loading=!0,D.oper.getList(s.tableData.param).then((e=>{s.tableData.data=e.list,s.tableData.total=e.total}))["finally"]((()=>{s.tableData.loading=!1}))};t((()=>{u()}));return{queryRef:i,onRowDel:e=>{let a="你确定要删除所选数据？",l=[];e?(a=`此操作将永久删除：“${e.loginName}”，是否继续?`,l=[e.operId]):l=s.ids,0!==l.length?V.confirm(a,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",beforeClose:(e,a,t)=>{"confirm"===e?(a.confirmButtonLoading=!0,a.confirmButtonText="删除中",D.oper.del(l).then((()=>{T.success("删除成功"),u(),t()}))):t()}})["catch"]((()=>{})):T.error("请选择要删除的数据。")},onOpenDetail:e=>{p.value=!0,d.value=e},dataList:u,resetQuery:e=>{e&&(e.resetFields(),u())},handleSelectionChange:e=>{s.ids=e.map((e=>e.operId))},dialogVisible:p,currentRow:d,admin_login_status:n,...o(s)}}}),R={key:0,size:"small"},v={key:1,size:"small"},z={key:2,size:"small"},x={key:3,size:"small"},L={key:0,size:"small"},C={key:1,size:"small"},N={key:2,size:"small"},S={"class":"dialog-footer"};var U=_(k,[["render",function(e,a,l,t,o,r){const _=s("el-input"),D=s("el-form-item"),T=s("el-option"),V=s("el-select"),k=s("ele-Search"),U=s("el-icon"),j=s("el-button"),B=s("ele-Delete"),I=s("el-form"),K=s("el-table-column"),q=s("el-tag"),P=s("el-table"),O=s("pagination"),E=s("el-dialog"),F=s("el-card"),M=p("auth"),Q=p("col"),W=p("loading");return d(),i(F,{shadow:"nover","class":"page"},{"default":n((()=>[u(I,{model:e.tableData.param,ref:"queryRef",inline:""},{"default":n((()=>[u(D,{label:"",prop:"title"},{"default":n((()=>[u(_,{modelValue:e.tableData.param.title,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tableData.param.title=a),placeholder:"系统模块",clearable:"",style:{width:"220px"},onKeyup:m(e.dataList,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),u(D,{label:"",prop:"operName"},{"default":n((()=>[u(_,{modelValue:e.tableData.param.operName,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tableData.param.operName=a),placeholder:"操作人员",clearable:"",style:{width:"220px"},onKeyup:m(e.dataList,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),u(D,{label:"",prop:"businessType"},{"default":n((()=>[u(V,{modelValue:e.tableData.param.businessType,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tableData.param.businessType=a),placeholder:"业务类型",clearable:"",style:{width:"120px"}},{"default":n((()=>[u(T,{label:"新增",value:1}),u(T,{label:"修改",value:2}),u(T,{label:"删除",value:3}),u(T,{label:"其它",value:0})])),_:1},8,["modelValue"])])),_:1}),u(D,{label:"",prop:"status"},{"default":n((()=>[u(V,{modelValue:e.tableData.param.status,"onUpdate:modelValue":a[3]||(a[3]=a=>e.tableData.param.status=a),placeholder:"请选择状态",style:{width:"100px"}},{"default":n((()=>[u(T,{label:"全部状态",value:-1}),u(T,{label:"正常",value:1}),u(T,{label:"异常",value:0})])),_:1},8,["modelValue"])])),_:1}),u(D,null,{"default":n((()=>[u(j,{type:"primary","class":"ml10",onClick:e.dataList},{"default":n((()=>[u(U,null,{"default":n((()=>[u(k)])),_:1}),b(" 查询 ")])),_:1},8,["onClick"]),c((d(),i(j,{type:"info","class":"ml10",onClick:a[4]||(a[4]=a=>e.onRowDel(null))},{"default":n((()=>[u(U,null,{"default":n((()=>[u(B)])),_:1}),b(" 删除日志 ")])),_:1})),[[M,"del"]])])),_:1})])),_:1},8,["model"]),c((d(),i(P,{data:e.tableData.data,style:{width:"100%"},onSelectionChange:e.handleSelectionChange},{"default":n((()=>[u(K,{type:"selection",width:"55",align:"center",fixed:"left"}),u(K,{label:"编号",align:"center",width:"100",prop:"operId"}),u(K,{label:"系统模块",align:"center",prop:"title","min-width":"120","show-overflow-tooltip":""}),u(K,{label:"业务类型",align:"center",prop:"businessType",width:"130"},{"default":n((e=>[0===e.row.businessType?(d(),f("span",R,"其他")):1===e.row.businessType?(d(),f("span",v,"新增")):2===e.row.businessType?(d(),f("span",z,"修改")):3===e.row.businessType?(d(),f("span",x,"删除")):g("",!0)])),_:1}),c((d(),i(K,{label:"操作类型",align:"center",prop:"operatorType",width:"130"},{"default":n((e=>[0===e.row.operatorType?(d(),f("span",L,"其他")):1===e.row.operatorType?(d(),f("span",C,"后台用户")):2===e.row.operatorType?(d(),f("span",N,"手机端用户")):g("",!0)])),_:1})),[[Q,"operatorType"]]),c(u(K,{label:"操作人员",align:"center",prop:"operName","show-overflow-tooltip":""},null,512),[[Q,"operName"]]),u(K,{label:"组织名称",align:"center",prop:"deptName"}),u(K,{label:"主机","show-overflow-tooltip":"",align:"center",prop:"operIp",width:"160"}),c(u(K,{label:"操作地点","show-overflow-tooltip":"",align:"center",prop:"operLocation",width:"130"},null,512),[[Q,"operLocation"]]),c(u(K,{label:"操作时间",align:"center",prop:"operTime",width:"160"},null,512),[[Q,"operTime"]]),c((d(),i(K,{label:"操作状态",align:"center",prop:"status",width:"100"},{"default":n((e=>[1===e.row.status?(d(),i(q,{key:0,type:"success",size:"small"},{"default":n((()=>[b("正常")])),_:1})):0===e.row.status?(d(),i(q,{key:1,type:"warning",size:"small"},{"default":n((()=>[b("异常")])),_:1})):(d(),i(q,{key:2,type:"info",size:"small"},{"default":n((()=>[b("-")])),_:1}))])),_:1})),[[Q,"status"]]),c((d(),i(K,{label:"操作",width:"80",align:"center",fixed:"right"},{"default":n((a=>[c((d(),i(j,{size:"small",type:"text",onClick:l=>e.onOpenDetail(a.row)},{"default":n((()=>[b("详细")])),_:2},1032,["onClick"])),[[M,"detail"]])])),_:1})),[[Q,"handle"]])])),_:1},8,["data","onSelectionChange"])),[[W,e.tableData.loading]]),c(u(O,{total:e.tableData.total,page:e.tableData.param.pageNum,"onUpdate:page":a[5]||(a[5]=a=>e.tableData.param.pageNum=a),limit:e.tableData.param.pageSize,"onUpdate:limit":a[6]||(a[6]=a=>e.tableData.param.pageSize=a),onPagination:e.dataList},null,8,["total","page","limit","onPagination"]),[[w,e.tableData.total>0]]),u(E,{title:e.currentRow.title+"详情",modelValue:e.dialogVisible,"onUpdate:modelValue":a[8]||(a[8]=a=>e.dialogVisible=a),width:"550px"},{footer:n((()=>[y("span",S,[u(j,{onClick:a[7]||(a[7]=a=>e.dialogVisible=!1)},{"default":n((()=>[b("关 闭")])),_:1})])])),"default":n((()=>[u(I,{model:e.currentRow,ref:"formRef","label-width":"90px"},{"default":n((()=>[u(D,{label:"系统模块",prop:"title"},{"default":n((()=>[b(h(e.currentRow.title),1)])),_:1}),u(D,{label:"请求方式",prop:"title"},{"default":n((()=>[b(h(e.currentRow.requestMethod),1)])),_:1}),u(D,{label:"方法名称",prop:"title"},{"default":n((()=>[b(h(e.currentRow.method),1)])),_:1}),u(D,{label:"操作地点",prop:"title"},{"default":n((()=>[b(h(e.currentRow.operLocation),1)])),_:1}),u(D,{label:"请求参数",prop:"title"},{"default":n((()=>[b(h(e.currentRow.operParam),1)])),_:1}),u(D,{label:"返回参数",prop:"title"},{"default":n((()=>[b(h(e.currentRow.jsonResult),1)])),_:1}),u(D,{label:"操作状态",prop:"title"},{"default":n((()=>[e.currentRow.status?(d(),i(q,{key:0,type:"success",size:"small"},{"default":n((()=>[b("正常")])),_:1})):(d(),i(q,{key:1,type:"warning",size:"small"},{"default":n((()=>[b("异常")])),_:1}))])),_:1}),u(D,{label:"操作时间",prop:"title"},{"default":n((()=>[b(h(e.currentRow.operTime),1)])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])),_:1})}]]);export{U as default};