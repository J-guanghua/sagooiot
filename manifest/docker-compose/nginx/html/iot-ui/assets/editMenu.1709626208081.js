import{n as e,d as l,h as o,a1 as a,l as t,k as n,i as r,aa as s,ah as i,o as d,a as u,Y as c,S as m,R as f,M as p,_ as h,T as g,Z as b,b as I,X as x,V,F as y,a7 as _,e as F,W as S}from"./vue.1709626208081.js";import{q as w,_ as v,b as k,E as T,r as C}from"./index.1709626208081.js";const P=()=>new Promise(((l,o)=>{e((()=>{const e=document.styleSheets;let a=[],t=[];for(let l=0;l<e.length;l++)e[l].href&&e[l].href.indexOf("at.alicdn.com")>-1&&a.push(e[l]);for(let l=0;l<a.length;l++)for(let e=0;e<a[l].cssRules.length;e++)a[l].cssRules[e].selectorText&&a[l].cssRules[e].selectorText.indexOf(".icon-")>-1&&t.push(`${a[l].cssRules[e].selectorText.substring(1,a[l].cssRules[e].selectorText.length).replace(/\:\:before/gi,"")}`);t.length>0?l(t):o("未获取到值，请刷新重试")}))})),L=()=>new Promise(((l,o)=>{e((()=>{const e=w,a=[];for(const l in e)a.push(`ele-${e[l].name}`);a.length>0?l(a):o("未获取到值，请刷新重试")}))})),R=()=>new Promise(((l,o)=>{e((()=>{const e=document.styleSheets;let a=[],t=[];for(let l=0;l<e.length;l++)e[l].href&&e[l].href.indexOf("netdna.bootstrapcdn.com")>-1&&a.push(e[l]);for(let l=0;l<a.length;l++)for(let e=0;e<a[l].cssRules.length;e++)a[l].cssRules[e].selectorText&&0===a[l].cssRules[e].selectorText.indexOf(".fa-")&&-1===a[l].cssRules[e].selectorText.indexOf(",")&&/::before/.test(a[l].cssRules[e].selectorText)&&t.push(`${a[l].cssRules[e].selectorText.substring(1,a[l].cssRules[e].selectorText.length).replace(/\:\:before/gi,"")}`);t.length>0?l(t.reverse()):o("未获取到值，请刷新重试")}))})),U=l({name:"iconSelector",emits:["update:modelValue","get","clear"],props:{prepend:{type:String,"default":()=>"ele-Pointer"},placeholder:{type:String,"default":()=>"请输入内容搜索图标或者选择图标"},size:{type:String,"default":()=>"default"},title:{type:String,"default":()=>"请选择图标"},type:{type:String,"default":()=>"ele"},disabled:{type:Boolean,"default":()=>!1},clearable:{type:Boolean,"default":()=>!0},emptyDescription:{type:String,"default":()=>"无相关图标"},modelValue:String},setup(l,{emit:i}){const d=o(),u=o(),c=a({fontIconPrefix:"",fontIconVisible:!1,fontIconWidth:0,fontIconSearch:"",fontIconTabsIndex:0,fontIconSheetsList:[],fontIconPlaceholder:"",fontIconType:"ali",fontIconShow:!0}),m=()=>{if(""===l.modelValue)return!1;c.fontIconPlaceholder=l.modelValue,c.fontIconPrefix=l.modelValue},f=t((()=>{if(!c.fontIconSearch)return c.fontIconSheetsList;let e=c.fontIconSearch.trim().toLowerCase();return c.fontIconSheetsList.filter((l=>{if(-1!==l.toLowerCase().indexOf(e))return l}))})),p=()=>{e((()=>{c.fontIconWidth=d.value.$el.offsetWidth}))},h=e=>{c.fontIconType=e,(async e=>{c.fontIconSheetsList=[],"ali"===e?await P().then((e=>{c.fontIconSheetsList=e.map((e=>`iconfont ${e}`))})):"ele"===e?await L().then((e=>{c.fontIconSheetsList=e})):"awe"===e&&await R().then((e=>{c.fontIconSheetsList=e.map((e=>`fa ${e}`))})),c.fontIconPlaceholder=l.placeholder,m(),u.value.wrap$.scrollTop=0})(e)};return n((()=>{var e,o,a;"all"===l.type?(null==(e=l.modelValue)?void 0:e.indexOf("iconfont"))>-1?h("ali"):(null==(o=l.modelValue)?void 0:o.indexOf("ele-"))>-1?h("ele"):(null==(a=l.modelValue)?void 0:a.indexOf("fa"))>-1?h("awe"):h("ali"):h(l.type),window.addEventListener("resize",(()=>{p()})),p()})),r((()=>l.modelValue),(()=>{m()})),{inputWidthRef:d,selectorScrollbarRef:u,fontIconSheetsFilterList:f,onColClick:e=>{c.fontIconPlaceholder=e,c.fontIconVisible=!1,c.fontIconPrefix=e,i("get",c.fontIconPrefix),i("update:modelValue",c.fontIconPrefix)},onIconChange:h,onClearFontIcon:()=>{c.fontIconPrefix="",i("clear",c.fontIconPrefix),i("update:modelValue",c.fontIconPrefix)},onIconFocus:()=>{if(c.fontIconVisible=!0,!l.modelValue)return!1;c.fontIconSearch="",c.fontIconPlaceholder=l.modelValue},onIconBlur:()=>{setTimeout((()=>{c.fontIconSheetsList.filter((e=>e===c.fontIconSearch)).length<=0&&(c.fontIconSearch="")}),300)},...s(c)}}}),O={"class":"icon-selector"},D={"class":"icon-selector-warp"},q={"class":"icon-selector-warp-title flex"},z={"class":"flex-auto"},W={key:0,"class":"icon-selector-warp-title-tab"},$={"class":"icon-selector-warp-row"},B={"class":"flex-margin"},A={"class":"icon-selector-warp-item-value"};const E={id:void 0,parentId:-1,menuType:0,title:"",name:"",component:"",isLink:0,weigh:0,path:"",redirect:"",icon:"",isHide:0,isAffix:0,linkUrl:"",isIframe:0,status:1},H=l({name:"systemEditMenu",components:{IconSelector:v(U,[["render",function(e,l,o,a,t,n){const r=i("SvgIcon"),s=i("el-input"),F=i("el-col"),S=i("el-row"),w=i("el-empty"),v=i("el-scrollbar"),k=i("el-popover");return d(),u("div",O,[c(k,{placement:"bottom",width:e.fontIconWidth,visible:e.fontIconVisible,"onUpdate:visible":l[4]||(l[4]=l=>e.fontIconVisible=l),"popper-class":"icon-selector-popper"},{reference:m((()=>[c(s,{modelValue:e.fontIconSearch,"onUpdate:modelValue":l[0]||(l[0]=l=>e.fontIconSearch=l),placeholder:e.fontIconPlaceholder,clearable:e.clearable,disabled:e.disabled,size:e.size,ref:"inputWidthRef",onClear:e.onClearFontIcon,onFocus:e.onIconFocus,onBlur:e.onIconBlur},{prepend:m((()=>{var l,o;return[(""===e.fontIconPrefix?(null==(l=e.prepend)?void 0:l.indexOf("ele-"))>-1:(null==(o=e.fontIconPrefix)?void 0:o.indexOf("ele-"))>-1)?(d(),f(r,{key:0,name:""===e.fontIconPrefix?e.prepend:e.fontIconPrefix,"class":"font14"},null,8,["name"])):(d(),u("i",{key:1,"class":p([""===e.fontIconPrefix?e.prepend:e.fontIconPrefix,"font14"])},null,2))]})),_:1},8,["modelValue","placeholder","clearable","disabled","size","onClear","onFocus","onBlur"])])),"default":m((()=>[c(h,{name:"el-zoom-in-top"},{"default":m((()=>[g(I("div",D,[I("div",q,[I("div",z,x(e.title),1),"all"===e.type?(d(),u("div",W,[I("span",{"class":p([{"span-active":"ali"===e.fontIconType},"ml10"]),onClick:l[1]||(l[1]=l=>e.onIconChange("ali")),title:"iconfont 图标"},"ali",2),I("span",{"class":p([{"span-active":"ele"===e.fontIconType},"ml10"]),onClick:l[2]||(l[2]=l=>e.onIconChange("ele")),title:"elementPlus 图标"},"ele",2),I("span",{"class":p([{"span-active":"awe"===e.fontIconType},"ml10"]),onClick:l[3]||(l[3]=l=>e.onIconChange("awe")),title:"fontawesome 图标"},"awe",2)])):V("",!0)]),I("div",$,[c(v,{ref:"selectorScrollbarRef"},{"default":m((()=>[e.fontIconSheetsFilterList.length>0?(d(),f(S,{key:0,gutter:10},{"default":m((()=>[(d(!0),u(y,null,_(e.fontIconSheetsFilterList,((l,o)=>(d(),f(F,{xs:6,sm:4,md:4,lg:4,xl:4,onClick:o=>e.onColClick(l),key:o},{"default":m((()=>[I("div",{"class":p(["icon-selector-warp-item",{"icon-selector-active":e.fontIconPrefix===l}])},[I("div",B,[I("div",A,[c(r,{name:l},null,8,["name"])])])],2)])),_:2},1032,["onClick"])))),128))])),_:1})):V("",!0),e.fontIconSheetsFilterList.length<=0?(d(),f(w,{key:1,"image-size":100,description:e.emptyDescription},null,8,["description"])):V("",!0)])),_:1},512)])],512),[[b,e.fontIconVisible]])])),_:1})])),_:1},8,["width","visible"])])}]])},props:{visibleOptions:{type:Array,"default":()=>[]},menu:{type:Array,"default":()=>[]},acType:{type:String,"default":()=>"add"}},setup(l,{emit:t}){const n=o(null),r=a({loading:!1,isShowDialog:!1,roles:[],ruleForm:{...E},rules:{parentId:[{required:!0,message:"父菜单不能为空",trigger:"blur"}],component:[{required:!0,message:"组件地址不能为空",trigger:"blur"}],path:[{required:!0,message:"路由地址不能为空",trigger:"blur"}],title:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],name:[{required:!0,message:"规则名称不能为空",trigger:"blur"}],menuType:[{required:!0,message:"菜单类型不能为空",trigger:"blur"}]}}),i=()=>{r.isShowDialog=!1},d=()=>{C()},u=()=>{r.ruleForm={...E}};return{ruleFormRef:n,openDialog:o=>{u(),e((()=>{o&&("add"===l.acType?r.ruleForm.parentId=o.id:"edit"===l.acType&&k.menu.detail(o.id).then((e=>{r.ruleForm=e}))),r.isShowDialog=!0,r.loading=!1}))},closeDialog:i,onSelectIframeChange:()=>{1===r.ruleForm.isIframe?r.ruleForm.isLink=1:r.ruleForm.isLink=0},onCancel:()=>{i()},onSubmit:()=>{const e=F(n);e&&e.validate((e=>{e&&(r.loading=!0,r.ruleForm.parentId||(r.ruleForm.parentId=-1),"add"===l.acType?k.menu.add(r.ruleForm).then((()=>{T.success("菜单添加成功"),i(),d(),t("menuList")}))["finally"]((()=>{r.loading=!1})):k.menu.edit(r.ruleForm).then((()=>{T.success("菜单修改成功"),i(),d(),t("menuList")}))["finally"]((()=>{r.loading=!1})))}))},resetMenuSession:d,...s(r)}}}),M={"class":"system-edit-menu-container"},j={key:0},X={"class":"dialog-footer"};var Y=v(H,[["render",function(e,l,o,a,t,n){const r=i("el-cascader"),s=i("el-form-item"),p=i("el-col"),h=i("el-radio"),g=i("el-radio-group"),b=i("el-input"),y=i("IconSelector"),_=i("el-input-number"),F=i("el-row"),w=i("el-form"),v=i("el-button"),k=i("el-dialog");return d(),u("div",M,[c(k,{title:("add"===e.acType?"新增":"修改")+"菜单",modelValue:e.isShowDialog,"onUpdate:modelValue":l[13]||(l[13]=l=>e.isShowDialog=l),width:"769px","close-on-click-modal":!1},{footer:m((()=>[I("span",X,[c(v,{onClick:e.onCancel},{"default":m((()=>[S("取 消")])),_:1},8,["onClick"]),c(v,{type:"primary",onClick:e.onSubmit,loading:e.loading},{"default":m((()=>[S("提 交")])),_:1},8,["onClick","loading"])])])),"default":m((()=>[c(w,{model:e.ruleForm,rules:e.rules,ref:"ruleFormRef","label-width":"80px"},{"default":m((()=>[c(F,{gutter:35},{"default":m((()=>[c(p,{xs:24,sm:24,md:24,lg:24,xl:24,"class":"mb20"},{"default":m((()=>[c(s,{label:"上级菜单",prop:"parentId"},{"default":m((()=>[c(r,{options:[{id:-1,title:"主类目",children:e.menu}],props:{label:"title",value:"id",checkStrictly:!0,emitPath:!1},placeholder:"请选择上级菜单",clearable:!1,"class":"w100",modelValue:e.ruleForm.parentId,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.parentId=l)},{"default":m((({node:e,data:l})=>[I("span",null,x(l.title),1),e.isLeaf?V("",!0):(d(),u("span",j," ("+x(l.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1})])),_:1}),c(p,{xs:24,sm:24,md:24,lg:24,xl:24,"class":"mb20"},{"default":m((()=>[c(s,{label:"菜单类型",prop:"menuType"},{"default":m((()=>[c(g,{modelValue:e.ruleForm.menuType,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.menuType=l)},{"default":m((()=>[c(h,{label:0},{"default":m((()=>[S("目录")])),_:1}),c(h,{label:1},{"default":m((()=>[S("菜单")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),c(p,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"菜单名称",prop:"title"},{"default":m((()=>[c(b,{modelValue:e.ruleForm.title,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.title=l),placeholder:"请填写菜单名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),c(p,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"规则名称",prop:"name"},{"default":m((()=>[c(b,{modelValue:e.ruleForm.name,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ruleForm.name=l),placeholder:"请填写规则名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),c(p,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"路由路径",prop:"path"},{"default":m((()=>[c(b,{modelValue:e.ruleForm.path,"onUpdate:modelValue":l[4]||(l[4]=l=>e.ruleForm.path=l),placeholder:"路由中的 path 值",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),c(p,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"组件路径",prop:"component"},{"default":m((()=>[c(b,{modelValue:e.ruleForm.component,"onUpdate:modelValue":l[5]||(l[5]=l=>e.ruleForm.component=l),placeholder:"组件路径",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),c(p,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"菜单图标"},{"default":m((()=>[c(y,{placeholder:"请输入菜单图标",modelValue:e.ruleForm.icon,"onUpdate:modelValue":l[6]||(l[6]=l=>e.ruleForm.icon=l),type:"all"},null,8,["modelValue"])])),_:1})])),_:1}),c(p,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"链接地址"},{"default":m((()=>[c(b,{modelValue:e.ruleForm.linkUrl,"onUpdate:modelValue":l[7]||(l[7]=l=>e.ruleForm.linkUrl=l),placeholder:"外链/内嵌时链接地址（http://xxx.com）",clearable:"",disabled:0===e.ruleForm.isLink},null,8,["modelValue","disabled"])])),_:1})])),_:1}),c(p,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"菜单排序"},{"default":m((()=>[c(_,{modelValue:e.ruleForm.weigh,"onUpdate:modelValue":l[8]||(l[8]=l=>e.ruleForm.weigh=l),"controls-position":"right",placeholder:"请输入排序","class":"w100"},null,8,["modelValue"])])),_:1})])),_:1}),c(p,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"是否隐藏"},{"default":m((()=>[c(g,{modelValue:e.ruleForm.isHide,"onUpdate:modelValue":l[9]||(l[9]=l=>e.ruleForm.isHide=l)},{"default":m((()=>[c(h,{label:0},{"default":m((()=>[S("显示")])),_:1}),c(h,{label:1},{"default":m((()=>[S("隐藏")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),c(p,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"是否外链"},{"default":m((()=>[c(g,{modelValue:e.ruleForm.isLink,"onUpdate:modelValue":l[10]||(l[10]=l=>e.ruleForm.isLink=l),disabled:1===e.ruleForm.isIframe},{"default":m((()=>[c(h,{label:1},{"default":m((()=>[S("是")])),_:1}),c(h,{label:0},{"default":m((()=>[S("否")])),_:1})])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1}),c(p,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"是否内嵌"},{"default":m((()=>[c(g,{modelValue:e.ruleForm.isIframe,"onUpdate:modelValue":l[11]||(l[11]=l=>e.ruleForm.isIframe=l),onChange:e.onSelectIframeChange},{"default":m((()=>[c(h,{label:1},{"default":m((()=>[S("是")])),_:1}),c(h,{label:0},{"default":m((()=>[S("否")])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),1===e.ruleForm.menuType?(d(),f(p,{key:0,xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":m((()=>[c(s,{label:"是否固定"},{"default":m((()=>[c(g,{modelValue:e.ruleForm.isAffix,"onUpdate:modelValue":l[12]||(l[12]=l=>e.ruleForm.isAffix=l)},{"default":m((()=>[c(h,{label:1},{"default":m((()=>[S("固定")])),_:1}),c(h,{label:0},{"default":m((()=>[S("不固定")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})):V("",!0)])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}]]);export{Y as default};