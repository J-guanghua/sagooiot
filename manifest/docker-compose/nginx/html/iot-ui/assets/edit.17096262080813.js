import{j as e,l as a,p as l,k as d,_ as t,E as o}from"./index.1709626208081.js";import{r as s}from"./validator.1709626208081.js";import{u as p}from"./index.170962620808113.js";import{d as u,h as i,a1 as r,R as c,S as n,n as m,ah as f,o as y,b as V,Y as b,W as _,V as g,X as v,a as h}from"./vue.1709626208081.js";var k={getList:a=>e("/system/application/list",a),del:e=>a("/system/application/delete",{ids:e}),add:e=>l("/system/application/add",e),edit:e=>d("/system/application/edit",e),detail:a=>e("/system/application/get",{id:a}),status:e=>d("/system/application/status",e)};const I={key:0},K={"class":"dialog-footer"};var U=t(u({__name:"edit",props:{deptData:{type:Array,"default":()=>[]}},emits:["getList"],setup(e,{expose:a,emit:l}){const d=l,t=i(!1),u=i(),U={id:void 0,appId:"",name:"",icon:"",accessKey:"",secureKey:"",orgId:"",roleId:"",desc:"",status:1,callbackUri:""},j=r({...U}),x={name:[s("应用名称不能为空")],icon:[s("应用图标不能为空")],accessKey:[s("AK不能为空")],secureKey:[s("SK不能为空")],orgId:[s("组织不能为空")],roleId:[s("角色不能为空")]},S=async()=>{await u.value.validate();const e=j.id?k.edit:k.add;await e(j),o.success("操作成功"),L(),t.value=!1,d("getList")},w=e=>{j.icon=e},L=async()=>{Object.assign(j,{...U}),u.value&&u.value.resetFields()};return a({open:async e=>{L(),t.value=!0,m((()=>{Object.assign(j,{...e})}))}}),(a,l)=>{const d=f("el-input"),o=f("el-form-item"),s=f("el-cascader"),i=f("el-radio"),r=f("el-radio-group"),m=f("el-form"),k=f("el-button"),U=f("el-dialog");return y(),c(U,{"class":"api-edit",modelValue:t.value,"onUpdate:modelValue":l[9]||(l[9]=e=>t.value=e),title:""+(j.id?"编辑应用":"新增应用"),width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:n((()=>[V("div",K,[b(k,{onClick:l[8]||(l[8]=e=>t.value=!1)},{"default":n((()=>[_("取消")])),_:1}),b(k,{type:"primary",onClick:S},{"default":n((()=>[_("确定")])),_:1})])])),"default":n((()=>[b(m,{ref_key:"formRef",ref:u,model:j,rules:x,"label-width":"80px"},{"default":n((()=>[j.id?(y(),c(o,{key:0,label:"应用标识",prop:"appId"},{"default":n((()=>[b(d,{modelValue:j.appId,"onUpdate:modelValue":l[0]||(l[0]=e=>j.appId=e),placeholder:"请输入应用标识",disabled:""},null,8,["modelValue"])])),_:1})):g("",!0),b(o,{label:"应用名称",prop:"name"},{"default":n((()=>[b(d,{modelValue:j.name,"onUpdate:modelValue":l[1]||(l[1]=e=>j.name=e),placeholder:"请输入应用名称"},null,8,["modelValue"])])),_:1}),b(o,{label:"应用图标",prop:"icon"},{"default":n((()=>[b(p,{img:j.icon,onSetImg:w},null,8,["img"])])),_:1}),b(o,{label:"AK",prop:"accessKey"},{"default":n((()=>[b(d,{modelValue:j.accessKey,"onUpdate:modelValue":l[2]||(l[2]=e=>j.accessKey=e),placeholder:"请输入ak，应用接入认证"},null,8,["modelValue"])])),_:1}),b(o,{label:"SK",prop:"secureKey"},{"default":n((()=>[b(d,{modelValue:j.secureKey,"onUpdate:modelValue":l[3]||(l[3]=e=>j.secureKey=e),placeholder:"请输入sk，应用接入认证"},null,8,["modelValue"])])),_:1}),b(o,{label:"组织",prop:"orgId"},{"default":n((()=>[b(s,{options:e.deptData,props:{checkStrictly:!0,emitPath:!1,value:"deptId",label:"deptName"},placeholder:"请选择组织",clearable:"","class":"w100",modelValue:j.orgId,"onUpdate:modelValue":l[4]||(l[4]=e=>j.orgId=e)},{"default":n((({node:e,data:a})=>[V("span",null,v(a.deptName),1),e.isLeaf?g("",!0):(y(),h("span",I," ("+v(a.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1}),b(o,{label:"应用描述",prop:"desc"},{"default":n((()=>[b(d,{modelValue:j.desc,"onUpdate:modelValue":l[5]||(l[5]=e=>j.desc=e),type:"textarea",rows:3},null,8,["modelValue"])])),_:1}),b(o,{label:"应用状态",prop:"status"},{"default":n((()=>[b(r,{modelValue:j.status,"onUpdate:modelValue":l[6]||(l[6]=e=>j.status=e)},{"default":n((()=>[b(i,{label:1},{"default":n((()=>[_("启用")])),_:1}),b(i,{label:0},{"default":n((()=>[_("未启用")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"]),b(o,{label:"回调地址",prop:"callbackUri"},{"default":n((()=>[b(d,{modelValue:j.callbackUri,"onUpdate:modelValue":l[7]||(l[7]=e=>j.callbackUri=e),placeholder:"请输入回调地址"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue","title"])}}}),[["__scopeId","data-v-6ccba007"]]),j=Object.freeze(Object.defineProperty({__proto__:null,"default":U},Symbol.toStringTag,{value:"Module"}));export{U as E,k as a,j as e};