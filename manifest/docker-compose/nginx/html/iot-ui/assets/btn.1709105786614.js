import e from"./btn-form.1709105786614.js";import{b as t,E as a,r as l,h as n}from"./index.1709105786614.js";import{d,h as o,a as u,Y as s,S as i,F as r,ah as m,o as c,b as p,W as f}from"./vue.1709105786614.js";import"./validator.1709105786614.js";const v={"class":"p-3"},w=d({__name:"btn",setup(d,{expose:w}){const _=o("按钮权限"),h=o(!1),b=o([]),y=o(),x=o(),g=async()=>{b.value=[];let e=await t.menu.btn.getList({menuId:y.value.id,status:-1});b.value=e||[]},C=()=>{x.value.open({menuId:y.value.id})},k=async e=>{const[n,d]=e.split("-"),o={parentId:-1,menuId:y.value.id,name:d,types:n,description:"",status:1};await t.menu.btn.add(o),a.success("操作成功"),g(),l()};return w({open:async e=>{_.value="按钮权限 - "+e.title,h.value=!0,y.value=e,g()}}),(d,o)=>{const w=m("ele-FolderAdd"),y=m("el-icon"),V=m("el-button"),I=m("ele-Plus"),j=m("el-dropdown-item"),B=m("el-dropdown-menu"),T=m("el-dropdown"),z=m("el-table-column"),F=m("el-switch"),S=m("el-table"),U=m("el-drawer");return c(),u(r,null,[s(U,{modelValue:h.value,"onUpdate:modelValue":o[0]||(o[0]=e=>h.value=e),title:_.value,direction:"rtl",size:"700px"},{"default":i((()=>[p("div",v,[s(V,{type:"success","class":"mr-3",onClick:C},{"default":i((()=>[s(y,null,{"default":i((()=>[s(w)])),_:1}),f(" 新增按钮 ")])),_:1}),s(T,{onCommand:k},{dropdown:i((()=>[s(B,null,{"default":i((()=>[s(j,{command:"add-新增"},{"default":i((()=>[f("新增")])),_:1}),s(j,{command:"edit-编辑"},{"default":i((()=>[f("编辑")])),_:1}),s(j,{command:"detail-详情"},{"default":i((()=>[f("详情")])),_:1}),s(j,{command:"del-删除"},{"default":i((()=>[f("删除")])),_:1}),s(j,{command:"upload-导入"},{"default":i((()=>[f("导入")])),_:1}),s(j,{command:"download-导出"},{"default":i((()=>[f("导出")])),_:1}),s(j,{command:"reset-重置"},{"default":i((()=>[f("重置")])),_:1}),s(j,{command:"more-更多"},{"default":i((()=>[f("更多")])),_:1}),s(j,{command:"save-保存"},{"default":i((()=>[f("保存")])),_:1}),s(j,{command:"startOrStop-启用停用"},{"default":i((()=>[f("启用停用")])),_:1}),s(j,{command:"status-切换状态"},{"default":i((()=>[f("切换状态")])),_:1})])),_:1})])),"default":i((()=>[s(V,{text:"",type:"primary"},{"default":i((()=>[s(y,null,{"default":i((()=>[s(I)])),_:1}),f("常用按钮权限 ")])),_:1})])),_:1})]),s(S,{data:b.value,style:{width:"100%"},"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}},{"default":i((()=>[s(z,{type:"index",label:"序号",width:"60",align:"center"}),s(z,{prop:"name",label:"按钮名称",width:"220","show-overflow-tooltip":""}),s(z,{prop:"types",label:"按钮编码","show-overflow-tooltip":""}),s(z,{prop:"status",label:"状态",width:"100",align:"center"},{"default":i((e=>[s(F,{modelValue:e.row.status,"onUpdate:modelValue":t=>e.row.status=t,"inline-prompt":"","active-value":1,"inactive-value":0,"active-text":"启","inactive-text":"禁",onChange:d=>(e=>{let d=1===e.status?"启用":"停用";n.confirm('确认要"'+d+'"："'+e.name+'"按钮吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async function(){await t.menu.btn.setStatus(e.id,e.menuId,e.status),a.success("操作成功"),l()}))["catch"]((function(){e.status=0===e.status?1:0}))})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),s(z,{label:"操作",width:"100",align:"center"},{"default":i((e=>[s(V,{size:"small",text:"",type:"warning",onClick:t=>{return a=e.row,void x.value.open(a);var a}},{"default":i((()=>[f("修改")])),_:2},1032,["onClick"]),s(V,{size:"small",text:"",type:"danger",onClick:d=>{return o=e.row,void n.confirm(`此操作将删除按钮：“${o.name}”，是否继续?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((async()=>{await t.menu.btn.del(o.id),a.success("删除成功"),g(),l()}));var o}},{"default":i((()=>[f("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1},8,["modelValue","title"]),s(e,{ref_key:"btnFormRef",ref:x,"parent-data":b.value,onGetList:g},null,8,["parent-data"])],64)}}});export{w as default};