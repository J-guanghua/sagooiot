import{a as e}from"./index.170962620808122.js";import{r as l}from"./validator.1709626208081.js";import{_ as a,E as t}from"./index.1709626208081.js";import{d,h as o,a1 as s,R as u,S as i,n as m,ah as p,o as r,b as n,Y as c,W as f,a as v,a7 as y,X as _,F as V}from"./vue.1709626208081.js";const b={style:{float:"left"}},h={style:{float:"right","font-size":"13px"}},k={"class":"dialog-footer"};var g=a(d({__name:"edit",emits:["getList"],setup(a,{expose:d,emit:g}){const x=g,j=o(!1),w=o(),K=o(),U=o([{value:"input",name:"输入框"},{value:"textarea",name:"文本框"},{value:"date",name:"日期"},{value:"file",name:"上传图片"}]),L={id:void 0,name:"",productKey:"",title:"",types:"",desc:""},M=s({...L}),C={name:[l("字段名称不能为空")],title:[l("字段标题不能为空")],productKey:[l("所属产品不能为空")],types:[l("字段类型不能为空")]},F=async()=>{await w.value.validate();const l=M.id?e.dev_asset_metadata.edit:e.dev_asset_metadata.add;await l(M),t.success("操作成功"),O(),j.value=!1,x("getList")},O=async()=>{Object.assign(M,{...L}),w.value&&w.value.resetFields()};return d({open:async(l,a)=>{O(),j.value=!0,m((()=>{Object.assign(M,{...l}),e.product.getLists({}).then((e=>{K.value=e.product})),M.productKey=a.key}))}}),(e,l)=>{const a=p("el-option"),t=p("el-select"),d=p("el-form-item"),o=p("el-input"),s=p("el-form"),m=p("el-button"),g=p("el-dialog");return r(),u(g,{"class":"api-edit",modelValue:j.value,"onUpdate:modelValue":l[6]||(l[6]=e=>j.value=e),title:""+(M.id?"编辑设备档案属性":"新增设备档案属性"),width:"800px","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:i((()=>[n("div",k,[c(m,{onClick:l[5]||(l[5]=e=>j.value=!1)},{"default":i((()=>[f("取消")])),_:1}),c(m,{type:"primary",onClick:F},{"default":i((()=>[f("确定")])),_:1})])])),"default":i((()=>[c(s,{"class":"inline-form",ref_key:"formRef",ref:w,model:M,rules:C,"label-width":"120px"},{"default":i((()=>[c(d,{label:"所属产品",prop:"productKey"},{"default":i((()=>[c(t,{modelValue:M.productKey,"onUpdate:modelValue":l[0]||(l[0]=e=>M.productKey=e),placeholder:"请选择产品","class":"w100",disabled:""},{"default":i((()=>[(r(!0),v(V,null,y(K.value,(e=>(r(),u(a,{key:e.key,label:e.name,value:e.key},{"default":i((()=>[n("span",b,_(e.name),1),n("span",h,_(e.key),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),c(d,{label:"字段名称",prop:"name"},{"default":i((()=>[c(o,{modelValue:M.name,"onUpdate:modelValue":l[1]||(l[1]=e=>M.name=e),modelModifiers:{trim:!0},placeholder:"请输入字段名称"},null,8,["modelValue"])])),_:1}),c(d,{label:"字段标题",prop:"title"},{"default":i((()=>[c(o,{modelValue:M.title,"onUpdate:modelValue":l[2]||(l[2]=e=>M.title=e),modelModifiers:{trim:!0},placeholder:"请输入字段标题"},null,8,["modelValue"])])),_:1}),c(d,{label:"字段类型",prop:"types"},{"default":i((()=>[c(t,{modelValue:M.types,"onUpdate:modelValue":l[3]||(l[3]=e=>M.types=e),placeholder:"请字段类型","class":"w100",clearable:""},{"default":i((()=>[(r(!0),v(V,null,y(U.value,(e=>(r(),u(a,{key:e.value,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),c(d,{label:"字段描述",prop:"desc"},{"default":i((()=>[c(o,{modelValue:M.desc,"onUpdate:modelValue":l[4]||(l[4]=e=>M.desc=e),modelModifiers:{trim:!0},placeholder:"请输入字段描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}}),[["__scopeId","data-v-002038a4"]]);export{g as default};