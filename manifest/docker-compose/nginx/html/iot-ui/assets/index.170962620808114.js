import{d as e,h as t,R as a,S as l,ah as s,ar as o,o as i,b as n,Y as r,a0 as d,e as u,a8 as p,W as c,T as m,V as f}from"./vue.1709626208081.js";import{a as y,E as w}from"./edit.17096262080813.js";import{b as g,E as h,h as k}from"./index.1709626208081.js";import{u as _}from"./useCommon.1709626208081.js";import"./validator.1709626208081.js";import"./index.170962620808113.js";const v={"class":"search"},b=e({__name:"index",setup(e){const b=t(),C=t([]),x=t(),{params:z,tableData:S,getList:j,loading:D}=_(y.getList,"Data",{keyWord:""});j();g.dept.getList({status:1}).then((e=>{C.value=e}));const W=e=>{0==e.status?y.status({id:e.id,status:1}).then((e=>{j(),h.success(e.message||"操作成功")})):y.status({id:e.id,status:0}).then((e=>{j(),h.success(e.message||"操作成功")}))},L=async e=>{e?x.value.open(e):x.value.open()};return(e,t)=>{const g=s("el-input"),_=s("el-form-item"),R=s("ele-Search"),V=s("el-icon"),A=s("el-button"),F=s("ele-Refresh"),I=s("ele-FolderAdd"),T=s("el-form"),U=s("el-table-column"),B=s("el-tag"),E=s("el-table"),N=s("pagination"),O=s("el-card"),q=o("auth"),G=o("col"),K=o("loading");return i(),a(O,{shadow:"nover","class":"page"},{"default":l((()=>[n("div",v,[r(T,{model:u(z),inline:"",ref_key:"queryRef",ref:b},{"default":l((()=>[r(_,{label:"应用名称：",prop:"keyWord",onSubmit:t[2]||(t[2]=d((()=>{}),["prevent"]))},{"default":l((()=>[r(g,{modelValue:u(z).keyWord,"onUpdate:modelValue":t[0]||(t[0]=e=>u(z).keyWord=e),placeholder:"请输入应用名称",clearable:"",style:{width:"240px"},onKeyup:t[1]||(t[1]=p((e=>u(j)(1)),["enter","native"]))},null,8,["modelValue"])])),_:1}),r(_,null,{"default":l((()=>[r(A,{type:"primary","class":"ml10",onClick:t[3]||(t[3]=e=>u(j)(1))},{"default":l((()=>[r(V,null,{"default":l((()=>[r(R)])),_:1}),c(" 查询 ")])),_:1}),r(A,{onClick:t[4]||(t[4]=e=>{var t;(t=b.value)&&(t.resetFields(),j(1))})},{"default":l((()=>[r(V,null,{"default":l((()=>[r(F)])),_:1}),c(" 重置 ")])),_:1}),m((i(),a(A,{type:"primary",onClick:t[5]||(t[5]=e=>L())},{"default":l((()=>[r(V,null,{"default":l((()=>[r(I)])),_:1}),c(" 添加应用 ")])),_:1})),[[q,"add"]])])),_:1})])),_:1},8,["model"])]),m((i(),a(E,{data:u(S),style:{width:"100%"},"row-key":"id"},{"default":l((()=>[m(r(U,{prop:"id",label:"ID",width:"100","show-overflow-tooltip":""},null,512),[[G,"id"]]),m(r(U,{prop:"appId",label:"应用标识","show-overflow-tooltip":""},null,512),[[G,"appId"]]),m(r(U,{prop:"name",label:"应用名称","show-overflow-tooltip":""},null,512),[[G,"name"]]),m(r(U,{prop:"desc",label:"描述","show-overflow-tooltip":""},null,512),[[G,"desc"]]),m((i(),a(U,{prop:"status",label:"应用状态",width:"80",align:"center"},{"default":l((e=>[1==e.row.status?(i(),a(B,{key:0,size:"small",type:"success"},{"default":l((()=>[c("启用")])),_:1})):f("",!0),0==e.row.status?(i(),a(B,{key:1,size:"small",type:"info"},{"default":l((()=>[c("未启用")])),_:1})):f("",!0)])),_:1})),[[G,"status"]]),m(r(U,{prop:"createdAt",label:"创建时间",width:"160",align:"center"},null,512),[[G,"createdAt"]]),r(U,{label:"操作",width:"200",align:"center"},{"default":l((e=>[0==e.row.status?m((i(),a(A,{key:0,size:"small",text:"",type:"success",onClick:t=>W(e.row)},{"default":l((()=>[c("启用")])),_:2},1032,["onClick"])),[[q,"startOrStop"]]):f("",!0),e.row.status>0?m((i(),a(A,{key:1,size:"small",text:"",type:"primary",onClick:t=>W(e.row)},{"default":l((()=>[c("停用")])),_:2},1032,["onClick"])),[[q,"startOrStop"]]):f("",!0),m((i(),a(A,{size:"small",text:"",type:"warning",onClick:t=>L(e.row)},{"default":l((()=>[c("编辑")])),_:2},1032,["onClick"])),[[q,"edit"]]),m((i(),a(A,{size:"small",text:"",type:"danger",onClick:t=>{return a=e.row,void k.confirm(`此操作将删除应用：“${a.name}”，是否继续?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((async()=>{await y.del(a.id),h.success("删除成功"),j()}));var a}},{"default":l((()=>[c("删除")])),_:2},1032,["onClick"])),[[q,"del"]])])),_:1})])),_:1},8,["data"])),[[K,u(D)]]),u(z).total?(i(),a(N,{key:0,total:u(z).total,page:u(z).pageNum,"onUpdate:page":t[6]||(t[6]=e=>u(z).pageNum=e),limit:u(z).pageSize,"onUpdate:limit":t[7]||(t[7]=e=>u(z).pageSize=e),onPagination:t[8]||(t[8]=e=>u(j)())},null,8,["total","page","limit"])):f("",!0),r(w,{ref_key:"editFormRef",ref:x,deptData:C.value,onGetList:t[9]||(t[9]=e=>u(j)(1))},null,8,["deptData"])])),_:1})}}});export{b as default};