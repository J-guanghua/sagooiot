import{d as a,h as e,a1 as t,k as l,aa as i,R as d,S as s,aC as n,ah as o,o as r,b as c,Y as p,W as m,a8 as u,a as f,a7 as y,X as D,F as b,V as g,T as v,Z as h,aA as _,aB as k}from"./vue.1709626208081.js";import w from"./setEdit.1709626208081.js";import x from"./temEdit.1709626208081.js";import{a as R}from"./index.170962620808123.js";import{_ as C,E,h as L}from"./index.1709626208081.js";const T=a({name:"setlist",components:{EditDic:w,EditTemDic:x},setup(){const a=e(),d=e(),s=e(),o=e(),r=e(),c=n(),p=t({type:"",tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:20,keyWord:"",sendGateway:"",types:""}}}),m=()=>{p.tableData.loading=!0,R.config.getList(p.tableData.param).then((a=>{p.tableData.data=a.Data,p.tableData.total=a.Total}))["finally"]((()=>p.tableData.loading=!1))};l((()=>{p.tableData.param.sendGateway=c.params.id,m()}));return{onActionStatus:a=>{0==a.status?alarm.common.deploy({id:a.id}).then((a=>{m()})):alarm.common.undeploy({id:a.id}).then((a=>{m()}))},onOpenEditTem:a=>{s.value.opentemDialog(a.id,p.tableData.param.sendGateway)},temeditDicRef:s,addDicRef:a,editDicRef:d,detailRef:o,queryRef:r,onOpenAdd:a=>{d.value.openDialog(null,p.tableData.param.sendGateway)},onOpenEdit:a=>{d.value.openDialog({...a},p.tableData.param.sendGateway)},onRowDel:a=>{let e="你确定要删除所选数据？",t=[];a?(e=`此操作将永久删除：“${a.title}”，是否继续?`,t=a.id):t=p.ids,0!==t.length?L.confirm(e,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{R.config["delete"](t).then((()=>{E.success("删除成功"),m()}))}))["catch"]((()=>{})):E.error("请选择要删除的数据。")},dataList:m,resetQuery:a=>{a&&(a.resetFields(),m())},...i(p)}}}),G={"class":"system-user-search"},O={"class":"grid-content card"},S={"class":"ant-card"},W={"class":"ant-card-body"},j={"class":"pro-table-card-item"},A={"class":"card-item-avatar"},V=["src"],q={"class":"card-item-body"},z={"class":"card-item-header"},B={"class":"ellipsis"},F={"class":"ellipsis card-item-header-name",style:{width:"100%",height:"45px"}},N=(a=>(_("data-v-522b4130"),a=a(),k(),a))((()=>c("div",{"class":"card-item-header-name",style:{display:"none"}},null,-1))),U={"class":"card-item-content"},K={"class":"card-tools"},P=["onClick"],Q=["onClick"],I=["onClick"],X={key:0,style:{"text-align":"center",padding:"28px"}};var Y=C(T,[["render",function(a,e,t,l,i,n){const _=o("el-input"),k=o("el-form-item"),w=o("ele-Search"),x=o("el-icon"),R=o("el-button"),C=o("ele-Refresh"),E=o("ele-FolderAdd"),L=o("el-form"),T=o("el-tag"),Y=o("ele-Edit"),Z=o("ele-Wallet"),$=o("ele-Delete"),H=o("el-col"),J=o("el-row"),M=o("pagination"),aa=o("EditDic"),ea=o("EditTemDic"),ta=o("el-card");return r(),d(ta,{shadow:"nover","class":"page"},{"default":s((()=>[c("div",G,[p(L,{model:a.tableData.param,ref:"queryRef",inline:"",onKeyup:u(a.dataList,["enter","native"])},{"default":s((()=>[p(k,{label:"配置名称",prop:"keyWord"},{"default":s((()=>[p(_,{modelValue:a.tableData.param.keyWord,"onUpdate:modelValue":e[0]||(e[0]=e=>a.tableData.param.keyWord=e),placeholder:"请输入配置名称",clearable:"",style:{width:"240px"}},null,8,["modelValue"])])),_:1}),p(k,null,{"default":s((()=>[p(R,{type:"primary","class":"ml10",onClick:a.dataList},{"default":s((()=>[p(x,null,{"default":s((()=>[p(w)])),_:1}),m(" 查询 ")])),_:1},8,["onClick"]),p(R,{onClick:e[1]||(e[1]=e=>a.resetQuery(a.queryRef))},{"default":s((()=>[p(x,null,{"default":s((()=>[p(C)])),_:1}),m(" 重置 ")])),_:1}),p(R,{type:"primary","class":"ml10",onClick:a.onOpenAdd},{"default":s((()=>[p(x,null,{"default":s((()=>[p(E)])),_:1}),m(" 新增通知 ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","onKeyup"])]),p(J,{"class":"flex1"},{"default":s((()=>[(r(!0),f(b,null,y(a.tableData.data,((e,t)=>(r(),d(H,{span:8,key:t},{"default":s((()=>[c("div",O,[c("div",S,[c("div",W,[c("div",j,[c("div",A,[c("img",{width:"88",height:"88",src:"/imgs/notice/"+a.tableData.param.sendGateway+".svg",alt:""},null,8,V)]),c("div",q,[c("div",z,[c("div",B,[c("div",F,D(e.title),1),N])]),c("div",U,[m(" 通知方式："),p(T,null,{"default":s((()=>[m(D(1==e.types?"即时发送":"预约发送"),1)])),_:2},1024)])])])])]),c("div",K,[c("div",{"class":"card-button",onClick:t=>a.onOpenEdit(e)},[p(R,{type:"primary","class":"ml10",text:"",bg:""},{"default":s((()=>[p(x,null,{"default":s((()=>[p(Y)])),_:1}),m(" 修改 ")])),_:1})],8,P),c("div",{"class":"card-button",onClick:t=>a.onOpenEditTem(e)},[p(R,{type:"primary",text:"",bg:""},{"default":s((()=>[p(x,null,{"default":s((()=>[p(Z)])),_:1}),m(" 模板配置 ")])),_:1})],8,Q),c("div",{"class":"card-button",onClick:t=>a.onRowDel(e)},[p(R,{type:"danger",text:"",bg:""},{"default":s((()=>[p(x,null,{"default":s((()=>[p($)])),_:1}),m(" 删除 ")])),_:1})],8,I)])])])),_:2},1024)))),128))])),_:1}),0==a.tableData.total?(r(),f("div",X,"暂无数据")):g("",!0),v(p(M,{total:a.tableData.total,page:a.tableData.param.pageNum,"onUpdate:page":e[2]||(e[2]=e=>a.tableData.param.pageNum=e),limit:a.tableData.param.pageSize,"onUpdate:limit":e[3]||(e[3]=e=>a.tableData.param.pageSize=e),onPagination:a.dataList},null,8,["total","page","limit","onPagination"]),[[h,a.tableData.total>0]]),p(aa,{ref:"editDicRef",onDataList:a.dataList},null,8,["onDataList"]),p(ea,{ref:"temeditDicRef",onDataList:a.dataList},null,8,["onDataList"])])),_:1})}],["__scopeId","data-v-522b4130"]]);export{Y as default};