import{d as e,a1 as a,k as t,aa as n,a as l,T as o,R as i,S as s,Y as r,F as d,j as p,e as u,aE as c,ah as g,ar as m,o as f,W as h,b as k,M as w}from"./vue.1709626208081.js";import{a as y}from"./index.170962620808130.js";import{_ as C,E as z,h as S}from"./index.1709626208081.js";const b=e({name:"tunnel",props:{keyWord:{type:String,"default":""}},setup(e,{emit:l}){const{proxy:o}=p(),{network_tunnel_type:i}=o.useDict("network_tunnel_type"),s=c(),r=a({data:[],total:0,loading:!1,param:{page:1,pageSize:10},isShowMore:!0}),d=()=>{r.loading=!0;let a={keyWord:e.keyWord,pageNum:r.param.page,PageSize:r.param.pageSize};y.tunnel.getList(a).then((e=>{const{list:a,total:t,page:n}=e;r.data=a,r.total=t,r.param.page=n,r.loading=!1}))};return t((()=>{d()})),{fetchList:d,toDetail:e=>{s.push(`/iotmanager/network/tunnel/detail/${e}`)},toEdit:e=>{s.push(`/iotmanager/network/tunnel/edit/${e}`)},onChangeStatus:(e,a)=>{y.tunnel.changeTunnelStatus({id:e,status:a}).then((e=>{z.success(a?"已开启":"已关闭"),d()}))},onRowDel:e=>{S.confirm(`此操作将永久删除“${e.name}”，是否继续?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{y.tunnel.deleteItem({ids:[e.id]}).then((e=>{d(),z.success("删除成功")}))}))["catch"]((()=>{}))},onHandleSizeChange:e=>{r.param.pageSize=e,d()},onHandleCurrentChange:e=>{r.param.page=e,d()},typesFormat:e=>o.selectDictLabel(u(i),e),...n(r)}}}),_={"class":"more-opearte-wrap"};var v=C(b,[["render",function(e,a,t,n,p,u){const c=g("el-table-column"),y=g("el-tag"),C=g("el-button"),z=g("el-divider"),S=g("el-popover"),b=g("el-table"),v=g("el-pagination"),x=m("col"),D=m("auth"),j=m("loading");return f(),l(d,null,[o((f(),i(b,{data:e.data,style:{width:"100%"}},{"default":s((()=>[o(r(c,{align:"center",prop:"id",label:"ID",width:"100"},null,512),[[x,"id"]]),o(r(c,{align:"center",prop:"name",label:"名称"},null,512),[[x,"name"]]),o(r(c,{align:"center",prop:"types",label:"类型",formatter:a=>e.typesFormat(a.types)},null,8,["formatter"]),[[x,"type"]]),o(r(c,{align:"center",prop:"addr","min-width":"120",label:"地址"},null,512),[[x,"address"]]),o(r(c,{"show-overflow-tooltip":"",align:"center",prop:"createdAt",label:"创建时间",width:"170"},null,512),[[x,"createTime"]]),o((f(),i(c,{align:"center",prop:"types",label:"状态"},{"default":s((e=>[e.row.status?(f(),i(y,{key:1,size:"medium","class":"ml-2",type:"success"},{"default":s((()=>[h("启动")])),_:1})):(f(),i(y,{key:0,size:"medium","class":"ml-2",type:"info"},{"default":s((()=>[h("未启动")])),_:1}))])),_:1})),[[x,"status"]]),o((f(),i(c,{align:"center",label:"操作",width:"160"},{"default":s((t=>[o((f(),i(C,{onClick:a=>e.toDetail(t.row.id),size:"small",type:"text"},{"default":s((()=>[h("详情")])),_:2},1032,["onClick"])),[[D,"detail"]]),o((f(),i(C,{size:"small",link:"",key:"info",type:"info",onClick:a=>e.toEdit(t.row.id)},{"default":s((()=>[h("编辑")])),_:2},1032,["onClick"])),[[D,"edit"]]),r(S,{placement:"bottom",width:160,trigger:"click"},{reference:s((()=>[o((f(),i(C,{size:"small",type:"text","class":"more-btn",onClick:a[0]||(a[0]=a=>e.isShowMore=!e.isShowMore)},{"default":s((()=>[h("更多 "),k("i",{style:{"margin-left":"2px"},"class":w(e.isShowMore?"fa fa-angle-down":"fa fa-angle-up")},null,2)])),_:1})),[[D,"more"]])])),"default":s((()=>[k("div",_,[o((f(),i(C,{onClick:a=>e.onChangeStatus(t.row.id,1),disabled:t.row.status,link:"",size:"small",key:"success",type:"success"},{"default":s((()=>[h("启 用")])),_:2},1032,["onClick","disabled"])),[[D,"on"]]),r(z,{direction:"vertical"}),o((f(),i(C,{onClick:a=>e.onChangeStatus(t.row.id,0),disabled:!t.row.status,link:"",size:"small",key:"warning",type:"warning"},{"default":s((()=>[h("禁 用")])),_:2},1032,["onClick","disabled"])),[[D,"off"]]),r(z,{direction:"vertical"}),o((f(),i(C,{onClick:a=>e.onRowDel(t.row),link:"",size:"small",key:"danger",type:"danger"},{"default":s((()=>[h("删 除")])),_:2},1032,["onClick"])),[[D,"off"]])])])),_:2},1024)])),_:1})),[[x,"auth"]])])),_:1},8,["data"])),[[j,e.loading]]),r(v,{onSizeChange:e.onHandleSizeChange,onCurrentChange:e.onHandleCurrentChange,"class":"mt15","pager-count":5,"page-sizes":[10,20,30,50,100,200,300,500],"current-page":e.param.page,"onUpdate:currentPage":a[1]||(a[1]=a=>e.param.page=a),background:"","page-size":e.param.pageSize,"onUpdate:pageSize":a[2]||(a[2]=a=>e.param.pageSize=a),layout:"total, sizes, prev, pager, next, jumper",total:e.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])],64)}],["__scopeId","data-v-0a367f6c"]]);export{v as default};