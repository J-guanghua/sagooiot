import{a as e}from"./modbus.1709626208081.js";import a from"./dataAreaDialog.1709626208081.js";import t from"./deviceTemplateDialog.1709626208081.js";import{_ as l,E as o}from"./index.1709626208081.js";import{R as i,S as d,ah as m,o as s,Y as r,W as p,b as u,V as n}from"./vue.1709626208081.js";const c={"class":"page-full",style:{height:"65vh"}};var h=l({components:{DataAreaDialog:a,DeviceTemplateDialog:t},data:()=>({temp:{title:"",mode:1,remarks:"",number:""},rules:{title:[{required:!0,message:"请输入模板名称",trigger:"blur"}],mode:[{required:!0,message:"请选择模式",trigger:"change"}]},dialogVisible:!1,dialogStatus:"update",textMap:{update:"模板详情",create:"添加模板"},activeName:"1",tabsKey:Date.now()}),computed:{dialogWidth(){return"create"===this.dialogStatus?"500px":"80%"}},methods:{open(e,a){this.dialogStatus=e,this.tabsKey=Date.now(),this.dialogVisible=!0,a?(this.temp={...a},0===this.temp.mode&&(this.activeName="2")):this.getDataId()},closeDialog(){this.activeName="1",this.temp={title:"",mode:1,remarks:"",number:""},this.$refs.dataForm.resetFields(),this.dialogVisible=!1},getDataId(){e.getDataId().then((e=>{this.temp.number=e.data_id}))},createData(){this.$refs.dataForm.validate((a=>{a&&e.template.addTemplate(this.temp).then((()=>{this.$emit("getList"),this.closeDialog(),o.success("操作成功！")}))}))},updateData(){this.$refs.dataForm.validate((a=>{a&&e.template.editTemplate(this.temp).then((()=>{this.$emit("getList"),this.closeDialog(),o.success("操作成功！")}))}))},handleModeChange(e){0===e&&(this.activeName="2")}}},[["render",function(e,a,t,l,o,h){const g=m("el-input"),b=m("el-form-item"),f=m("el-option"),D=m("el-select"),V=m("el-form"),v=m("DataAreaDialog"),_=m("el-tab-pane"),k=m("DeviceTemplateDialog"),y=m("el-tabs"),N=m("el-button"),w=m("el-dialog");return s(),i(w,{title:o.textMap[o.dialogStatus],modelValue:o.dialogVisible,"onUpdate:modelValue":a[5]||(a[5]=e=>o.dialogVisible=e),width:h.dialogWidth,"before-close":h.closeDialog,"close-on-click-modal":!1},{footer:d((()=>[r(N,{onClick:h.closeDialog},{"default":d((()=>[p(" 取 消 ")])),_:1},8,["onClick"]),r(N,{type:"primary",onClick:a[4]||(a[4]=e=>"create"===o.dialogStatus?h.createData():h.updateData())},{"default":d((()=>[p(" 保 存 ")])),_:1})])),"default":d((()=>[u("div",c,[r(V,{"class":"form",ref:"dataForm",rules:o.rules,model:o.temp,"label-position":"right","label-width":"120px",style:{width:"400px"}},{"default":d((()=>[r(b,{label:"模板名称",prop:"title"},{"default":d((()=>[r(g,{modelValue:o.temp.title,"onUpdate:modelValue":a[0]||(a[0]=e=>o.temp.title=e),modelModifiers:{trim:!0},placeholder:"请输入模板名称"},null,8,["modelValue"])])),_:1}),r(b,{label:"读取模式",prop:"mode"},{"default":d((()=>[r(D,{modelValue:o.temp.mode,"onUpdate:modelValue":a[1]||(a[1]=e=>o.temp.mode=e),placeholder:"请选择模式","class":"filter-item",style:{width:"100%"},onChange:h.handleModeChange},{"default":d((()=>[r(f,{label:"批量读取",value:1})])),_:1},8,["modelValue","onChange"])])),_:1}),r(b,{label:"备注",prop:"remarks"},{"default":d((()=>[r(g,{modelValue:o.temp.remarks,"onUpdate:modelValue":a[2]||(a[2]=e=>o.temp.remarks=e),placeholder:"请输入备注"},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"]),"update"===o.dialogStatus?(s(),i(y,{modelValue:o.activeName,"onUpdate:modelValue":a[3]||(a[3]=e=>o.activeName=e),key:o.tabsKey},{"default":d((()=>[0!==o.temp.mode?(s(),i(_,{key:0,label:"数据区",name:"1"},{"default":d((()=>["1"===o.activeName?(s(),i(v,{key:0,templateNumber:o.temp.number,ref:"dataAreaDialog"},null,8,["templateNumber"])):n("",!0)])),_:1})):n("",!0),r(_,{label:"变量列表",name:"2"},{"default":d((()=>["2"===o.activeName?(s(),i(k,{key:0,templateNumber:o.temp.number,mode:o.temp.mode,ref:"deviceTemplateDialog"},null,8,["templateNumber","mode"])):n("",!0)])),_:1})])),_:1},8,["modelValue"])):n("",!0)])])),_:1},8,["title","modelValue","width","before-close"])}],["__scopeId","data-v-1ddadb04"]]);export{h as default};