import e from"./editPost.1709626208081.js";import{_ as a,b as l,h as t,E as o}from"./index.1709626208081.js";import{d as s,h as d,a1 as n,k as p,aa as r,R as i,S as u,ad as c,ah as m,ar as f,o as h,Y as b,W as w,T as y}from"./vue.1709626208081.js";var g=a(s({name:"apiV1SystemPostList",components:{EditPost:e},setup(){const e=d(),a=d(),s=d(),i=n({ids:[],tableData:{data:[],total:0,loading:!1,param:{postName:"",status:-1,postCode:""}}}),u=()=>{m()},m=()=>{i.tableData.loading=!0,l.post.getList(i.tableData.param).then((e=>{i.tableData.data=e}))["finally"]((()=>i.tableData.loading=!1))};p((()=>{u()}));return{queryRef:s,resetQuery:()=>{s.value.resetFields(),u()},addPostRef:e,editPostRef:a,onOpenAddPost:()=>{a.value.openDialog()},onOpenEditPost:e=>{a.value.openDialog(c(e))},onRowDel:e=>{let a="你确定要删除所选岗位？";a=`此操作将永久删除岗位：“${e.postName}”，是否继续?`,t.confirm(a,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{l.post.del(e.postId).then((()=>{o.success("删除成功"),m()}))}))["catch"]((()=>{}))},postList:m,handleSelectionChange:e=>{i.ids=e.map((e=>e.postId))},...r(i)}}}),[["render",function(e,a,l,t,o,s){const d=m("el-input"),n=m("el-form-item"),p=m("el-option"),r=m("el-select"),c=m("ele-Search"),g=m("el-icon"),C=m("el-button"),_=m("ele-Refresh"),D=m("ele-FolderAdd"),k=m("el-form"),P=m("el-table-column"),v=m("el-tag"),V=m("el-table"),R=m("EditPost"),S=m("el-card"),x=f("auth"),L=f("col"),N=f("loading");return h(),i(S,{shadow:"nover","class":"page"},{"default":u((()=>[b(k,{model:e.tableData.param,inline:"",ref:"queryRef"},{"default":u((()=>[b(n,{label:"岗位名称",prop:"postName"},{"default":u((()=>[b(d,{modelValue:e.tableData.param.postName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tableData.param.postName=a),placeholder:"请输入岗位名称","class":"w-50",clearable:""},null,8,["modelValue"])])),_:1}),b(n,{label:"岗位编码",prop:"postCode"},{"default":u((()=>[b(d,{modelValue:e.tableData.param.postCode,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tableData.param.postCode=a),placeholder:"请输入岗位编码","class":"w-50",clearable:""},null,8,["modelValue"])])),_:1}),b(n,{label:"状态",prop:"status"},{"default":u((()=>[b(r,{placeholder:"请选择状态",style:{width:"80px"},modelValue:e.tableData.param.status,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tableData.param.status=a)},{"default":u((()=>[b(p,{label:"全部",value:-1}),b(p,{label:"启用",value:1}),b(p,{label:"禁用",value:0})])),_:1},8,["modelValue"])])),_:1}),b(n,null,{"default":u((()=>[b(C,{type:"primary","class":"ml10",onClick:e.postList},{"default":u((()=>[b(g,null,{"default":u((()=>[b(c)])),_:1}),w(" 查询 ")])),_:1},8,["onClick"]),b(C,{onClick:a[3]||(a[3]=a=>e.resetQuery())},{"default":u((()=>[b(g,null,{"default":u((()=>[b(_)])),_:1}),w(" 重置 ")])),_:1}),y((h(),i(C,{type:"primary","class":"ml10",onClick:e.onOpenAddPost},{"default":u((()=>[b(g,null,{"default":u((()=>[b(D)])),_:1}),w(" 新增岗位 ")])),_:1},8,["onClick"])),[[x,"add"]])])),_:1})])),_:1},8,["model"]),y((h(),i(V,{data:e.tableData.data,style:{width:"100%"},onSelectionChange:e.handleSelectionChange,"row-key":"postId","tree-props":{children:"children",hasChildren:"hasChildren"}},{"default":u((()=>[b(P,{type:"selection",width:"55",align:"center"}),b(P,{type:"index",label:"序号",width:"60",align:"center"}),y(b(P,{prop:"postCode",label:"岗位编码",width:"220","show-overflow-tooltip":""},null,512),[[L,"postCode"]]),y(b(P,{prop:"postName",label:"岗位名称","show-overflow-tooltip":""},null,512),[[L,"postName"]]),y(b(P,{prop:"postSort",label:"排序",width:"60",align:"center"},null,512),[[L,"postSort"]]),y((h(),i(P,{prop:"status",label:"岗位状态",width:"120",align:"center"},{"default":u((e=>[1===e.row.status?(h(),i(v,{key:0,type:"success",size:"small"},{"default":u((()=>[w("启用")])),_:1})):(h(),i(v,{key:1,type:"info",size:"small"},{"default":u((()=>[w("禁用")])),_:1}))])),_:1})),[[L,"status"]]),y(b(P,{prop:"remark",label:"岗位描述","show-overflow-tooltip":""},null,512),[[L,"remark"]]),y(b(P,{prop:"createdAt",label:"创建时间",width:"180",align:"center"},null,512),[[L,"createdAt"]]),y((h(),i(P,{label:"操作",width:"100"},{"default":u((a=>[y((h(),i(C,{size:"small",text:"",type:"warning",onClick:l=>e.onOpenEditPost(a.row)},{"default":u((()=>[w("修改")])),_:2},1032,["onClick"])),[[x,"edit"]]),y((h(),i(C,{size:"small",text:"",type:"info",onClick:l=>e.onRowDel(a.row)},{"default":u((()=>[w("删除")])),_:2},1032,["onClick"])),[[x,"del"]])])),_:1})),[[L,"handle"]])])),_:1},8,["data","onSelectionChange"])),[[N,e.tableData.loading]]),b(R,{ref:"editPostRef",onGetPostList:e.postList},null,8,["onGetPostList"])])),_:1})}]]);export{g as default};