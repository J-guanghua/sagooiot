import{a as e}from"./index.170962620808122.js";import{_ as a,E as l}from"./index.1709626208081.js";import{d as t,h as n,a as u,R as o,V as r,Y as i,S as s,ah as p,o as d,F as c,a7 as y,b as v,a9 as f,W as m,X as b}from"./vue.1709626208081.js";const h={"class":"device-function"},k={"class":"table-wrapper"},_={"class":"btn"};var g=a(t({__name:"function",props:{productKey:String,deviceKey:String},setup(a){const t=a,g=n([]),V=n(!0);return V.value=!0,e.tabDeviceFucntion.getList({productKey:t.productKey}).then((e=>{e&&(e.forEach((e=>e.result="")),g.value=e)}))["finally"]((()=>V.value=!1)),(a,n)=>{const w=p("el-empty"),K=p("el-table-column"),S=p("el-option"),T=p("el-select"),x=p("el-input"),j=p("el-table"),C=p("el-button"),E=p("el-tab-pane"),J=p("el-tabs");return d(),u("div",h,[V.value||g.value.length?r("",!0):(d(),o(w,{key:0,description:"暂无功能列表，请先在物模型的功能定义中添加"})),i(J,{"tab-position":"left"},{"default":s((()=>[(d(!0),u(c,null,y(g.value,(a=>(d(),o(E,{label:a.name,key:a.key},{"default":s((()=>[v("div",k,[i(j,{data:a.inputs||[],border:""},{"default":s((()=>[i(K,{prop:"name",label:"参数名称"}),i(K,{prop:"valueType.type",label:"输入类型"}),i(K,{prop:"name",label:"值","min-width":"200"},{"default":s((({row:e})=>["enum"===e.valueType.type?(d(),o(T,{key:0,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,clearable:"",style:{wdith:"100% !important"}},{"default":s((()=>[(d(!0),u(c,null,y(e.valueType.elements,(e=>(d(),o(S,{key:e.value,value:e.text,label:e.text},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):(d(),o(x,{key:1,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,clearable:"",placeholder:"array"===e.valueType.type?"JSON.stringify(arr)结果去掉外层单引号":"请输入"},f({_:2},[e.valueType.unit?{name:"append",fn:s((()=>[m(b(e.valueType.unit),1)])),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder"]))])),_:2},1024)])),_:2},1032,["data"]),i(x,{type:"textarea",value:a.result,"class":"result","read-only":"",placeholder:"执行结果："},null,8,["value"])]),v("div",_,[i(C,{type:"primary",loading:a.loading,onClick:n=>function(a){if(a.result="",a.inputs.some((e=>!e.value)))return l.info("请输入完整参数");const n={};a.inputs.forEach((({key:e,value:a,valueType:t})=>{if("array"===t.type)try{if("object"!=typeof(a=JSON.parse(a)))throw new Error}catch(u){throw l.error("请输入正确的JSON数组字符串格式"),u}n[e]=a})),a.loading=!0,e.tabDeviceFucntion["do"]({deviceKey:t.deviceKey,funcKey:a.key,params:n}).then((e=>{a.result=JSON.stringify(e,null,2)}))["finally"]((()=>a.loading=!1))}(a)},{"default":s((()=>[m("执行")])),_:2},1032,["loading","onClick"]),i(C,{onClick:e=>{a.result=""}},{"default":s((()=>[m("清空")])),_:2},1032,["onClick"])])])),_:2},1032,["label"])))),128))])),_:1})])}}}),[["__scopeId","data-v-435284af"]]);export{g as default};