import{d as e,h as a,a1 as t,k as l,aa as o,a as n,Y as i,S as p,ah as d,ar as r,o as s,a8 as u,W as c,T as m,R as y,Z as f,b as g}from"./vue.1709626208081.js";import h from"./editPro.1709626208081.js";import{a as b}from"./index.170962620808122.js";import{_ as D,E as w,h as v}from"./index.1709626208081.js";import"./index.17096262080818.js";import"./index.170962620808113.js";import"./validator.1709626208081.js";import"./edit.17096262080815.js";const k=e({name:"deviceproduct",components:{EditDic:h},setup(){const e=a(),n=a(),i=a(),p=t({keys:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,status:"",name:"",deviceType:"",dateRange:[]}}}),d=()=>{p.tableData.loading=!0,b.product.getList(p.tableData.param).then((e=>{p.tableData.data=e.product,p.tableData.total=e.total}))["finally"]((()=>p.tableData.loading=!1))};l((()=>{d()}));return{addDicRef:e,editDicRef:n,queryRef:i,onOpenAddDic:()=>{n.value.openDialog()},onOpenEditDic:e=>{n.value.openDialog(e)},onRowDel:e=>{let a="你确定要删除所选数据？",t=[];e?(a=`此操作将永久删除产品：“${e.name}”，是否继续?`,t=[e.key]):t=p.keys,0!==t.length?v.confirm(a,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{b.product["delete"](t).then((()=>{w.success("删除成功"),d()}))}))["catch"]((()=>{})):w.error("请选择要删除的数据。")},typeList:d,resetQuery:e=>{e&&(e.resetFields(),d())},handleSelectionChange:e=>{p.keys=e.map((e=>e.key))},...o(p)}}}),_={"class":"page"},x=g("span",null,"详情",-1);var C=D(k,[["render",function(e,a,t,l,o,g){const h=d("el-input"),b=d("el-form-item"),D=d("el-option"),w=d("el-select"),v=d("el-date-picker"),k=d("ele-Search"),C=d("el-icon"),R=d("el-button"),V=d("ele-FolderAdd"),T=d("ele-Delete"),L=d("el-form"),S=d("el-table-column"),j=d("copy"),z=d("el-tag"),P=d("router-link"),U=d("el-table"),E=d("pagination"),N=d("el-card"),Y=d("EditDic"),K=r("auth"),O=r("col"),A=r("loading");return s(),n("div",_,[i(N,{shadow:"nover"},{"default":p((()=>[i(L,{model:e.tableData.param,ref:"queryRef",inline:"","label-width":"68px"},{"default":p((()=>[i(b,{label:"产品名称",prop:"name"},{"default":p((()=>[i(h,{modelValue:e.tableData.param.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tableData.param.name=a),placeholder:"请输入产品名称",clearable:"",style:{width:"240px"},onKeyup:u(e.typeList,["enter","native"])},null,8,["modelValue","onKeyup"])])),_:1}),i(b,{label:"设备类型",prop:"deviceType"},{"default":p((()=>[i(h,{modelValue:e.tableData.param.deviceType,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tableData.param.deviceType=a),placeholder:"请输入设备类型",clearable:"",style:{width:"240px"},onKeyup:u(e.typeList,["enter","native"])},null,8,["modelValue","onKeyup"])])),_:1}),i(b,{label:"发布状态",prop:"status",style:{width:"200px"}},{"default":p((()=>[i(w,{modelValue:e.tableData.param.status,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tableData.param.status=a),placeholder:"发布状态",clearable:"",style:{width:"240px"}},{"default":p((()=>[i(D,{label:"已发布",value:1}),i(D,{label:"未发布",value:0})])),_:1},8,["modelValue"])])),_:1}),i(b,{label:"创建时间",prop:"dateRange"},{"default":p((()=>[i(v,{modelValue:e.tableData.param.dateRange,"onUpdate:modelValue":a[3]||(a[3]=a=>e.tableData.param.dateRange=a),style:{width:"240px"},"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])])),_:1}),i(b,null,{"default":p((()=>[i(R,{type:"primary","class":"ml10",onClick:e.typeList},{"default":p((()=>[i(C,null,{"default":p((()=>[i(k)])),_:1}),c(" 查询 ")])),_:1},8,["onClick"]),m((s(),y(R,{type:"primary","class":"ml10",onClick:e.onOpenAddDic},{"default":p((()=>[i(C,null,{"default":p((()=>[i(V)])),_:1}),c(" 新增产品 ")])),_:1},8,["onClick"])),[[K,"add"]]),m((s(),y(R,{type:"info","class":"ml10",onClick:a[4]||(a[4]=a=>e.onRowDel())},{"default":p((()=>[i(C,null,{"default":p((()=>[i(T)])),_:1}),c(" 删除 ")])),_:1})),[[K,"del"]])])),_:1})])),_:1},8,["model"]),m((s(),y(U,{data:e.tableData.data,style:{width:"100%"},onSelectionChange:e.handleSelectionChange},{"default":p((()=>[i(S,{type:"selection",width:"55",align:"center"}),m((s(),y(S,{label:"标识",prop:"key","min-width":"130","show-overflow-tooltip":""},{"default":p((({row:e})=>[i(j,{text:e.key},null,8,["text"])])),_:1})),[[O,"key"]]),m(i(S,{label:"名称",prop:"name","min-width":"160","show-overflow-tooltip":""},null,512),[[O,"name"]]),m(i(S,{label:"分类",prop:"categoryName",align:"center",width:"140","show-overflow-tooltip":""},null,512),[[O,"categoryName"]]),m(i(S,{label:"消息协议",prop:"messageProtocol",align:"center","min-width":"150","show-overflow-tooltip":""},null,512),[[O,"messageProtocol"]]),m(i(S,{label:"接入方式",prop:"transportProtocol","min-width":"120",align:"center","show-overflow-tooltip":""},null,512),[[O,"transportProtocol"]]),m(i(S,{label:"类型",prop:"deviceType","min-width":"90",align:"center","show-overflow-tooltip":""},null,512),[[O,"deviceType"]]),m((s(),y(S,{prop:"status",label:"状态","min-width":"90",align:"center"},{"default":p((e=>[e.row.status?(s(),y(z,{key:0,type:"success",size:"small"},{"default":p((()=>[c("已发布")])),_:1})):(s(),y(z,{key:1,type:"info",size:"small"},{"default":p((()=>[c("未发布")])),_:1}))])),_:1})),[[O,"status"]]),i(S,{label:"操作",width:"130",align:"center",fixed:"right"},{"default":p((a=>[i(P,{to:"/iotmanager/device/product/detail/"+a.row.key,"class":"link-type",style:{"padding-right":"12px","font-size":"12px",color:"#409eff"}},{"default":p((()=>[x])),_:2},1032,["to"]),m((s(),y(R,{size:"small",text:"",type:"warning",onClick:t=>e.onOpenEditDic(a.row)},{"default":p((()=>[c("修改")])),_:2},1032,["onClick"])),[[K,"edit"]]),m((s(),y(R,{size:"small",text:"",type:"info",onClick:t=>e.onRowDel(a.row)},{"default":p((()=>[c("删除")])),_:2},1032,["onClick"])),[[K,"del"]])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[A,e.tableData.loading]]),m(i(E,{total:e.tableData.total,page:e.tableData.param.pageNum,"onUpdate:page":a[5]||(a[5]=a=>e.tableData.param.pageNum=a),limit:e.tableData.param.pageSize,"onUpdate:limit":a[6]||(a[6]=a=>e.tableData.param.pageSize=a),onPagination:e.typeList},null,8,["total","page","limit","onPagination"]),[[f,e.tableData.total>0]])])),_:1}),i(Y,{ref:"editDicRef",onTypeList:e.typeList},null,8,["onTypeList"])])}]]);export{C as default};