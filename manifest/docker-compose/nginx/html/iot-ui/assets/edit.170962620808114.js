import{_ as e,b as l,E as a}from"./index.1709626208081.js";import{p as t}from"./validator.1709626208081.js";import{d as o,h as r,a1 as d,aa as u,a as m,Y as s,S as i,e as n,ah as p,o as c,b as g,W as f,X as h,V as b}from"./vue.1709626208081.js";const F={parentId:-1,deptName:"",organizationId:1,orderNum:0,leader:"",phone:"",email:"",status:1},V=o({name:"systemEditDept",setup(e,{emit:o}){const m=r(null),s=d({isShowDialog:!1,ruleForm:{...F},deptData:[],orgData:[],rules:{organizationId:[{required:!0,message:"组织不能为空",trigger:"blur"}],deptName:[{required:!0,message:"组织名称不能为空",trigger:"blur"}],leader:[{required:!0,message:"负责人不能为空",trigger:"blur"}],phone:[{validator:t,trigger:"blur"}],email:[{type:"email",message:"请输入正确邮箱",trigger:"blur"}]}}),i=()=>{s.isShowDialog=!1},p=()=>{s.ruleForm={...F}};return{openDialog:e=>{p(),l.dept.getList({status:1}).then((e=>{s.deptData=e||[]})),l.org.getList({status:1}).then((e=>{s.orgData=e||[]})),e&&"object"==typeof e?s.ruleForm=e:e&&"number"==typeof e&&(s.ruleForm.parentId=e),s.isShowDialog=!0},closeDialog:i,onCancel:()=>{i()},onSubmit:()=>{const e=n(m);e&&e.validate((e=>{e&&(s.ruleForm.parentId||(s.ruleForm.parentId=-1),s.ruleForm.deptId?l.dept.edit(s.ruleForm).then((()=>{a.success("修改成功"),i(),o("deptList")})):l.dept.add(s.ruleForm).then((()=>{a.success("添加成功"),i(),o("deptList")})))}))},formRef:m,...u(s)}}}),x={"class":"system-edit-dept-container"},_={key:0},v={"class":"dialog-footer"};var w=e(V,[["render",function(e,l,a,t,o,r){const d=p("el-cascader"),u=p("el-form-item"),n=p("el-col"),F=p("el-input"),V=p("el-input-number"),w=p("el-switch"),D=p("el-row"),I=p("el-form"),N=p("el-button"),y=p("el-dialog");return c(),m("div",x,[s(y,{title:(e.ruleForm.deptId?"修改":"添加")+"组织",modelValue:e.isShowDialog,"onUpdate:modelValue":l[7]||(l[7]=l=>e.isShowDialog=l),width:"769px"},{footer:i((()=>[g("span",v,[s(N,{onClick:e.onCancel},{"default":i((()=>[f("取 消")])),_:1},8,["onClick"]),s(N,{type:"primary",onClick:e.onSubmit},{"default":i((()=>[f(h(e.ruleForm.deptId?"修 改":"添 加"),1)])),_:1},8,["onClick"])])])),"default":i((()=>[s(I,{ref:"formRef",model:e.ruleForm,rules:e.rules,"label-width":"90px"},{"default":i((()=>[s(D,{gutter:35},{"default":i((()=>[s(n,{xs:24,sm:24,md:24,lg:24,xl:24},{"default":i((()=>[s(u,{label:"上级组织"},{"default":i((()=>[s(d,{options:e.deptData,props:{checkStrictly:!0,emitPath:!1,value:"deptId",label:"deptName"},placeholder:"请选择组织",clearable:"","class":"w100",modelValue:e.ruleForm.parentId,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.parentId=l)},{"default":i((({node:e,data:l})=>[g("span",null,h(l.deptName),1),e.isLeaf?b("",!0):(c(),m("span",_," ("+h(l.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1})])),_:1}),s(n,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[s(u,{label:"组织名称",prop:"deptName"},{"default":i((()=>[s(F,{modelValue:e.ruleForm.deptName,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.deptName=l),modelModifiers:{trim:!0},"show-word-limit":"",maxlength:"20",placeholder:"请输入组织名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),s(n,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[s(u,{label:"负责人",prop:"leader"},{"default":i((()=>[s(F,{modelValue:e.ruleForm.leader,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.leader=l),modelModifiers:{trim:!0},placeholder:"请输入负责人",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),s(n,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[s(u,{label:"手机号",prop:"phone"},{"default":i((()=>[s(F,{modelValue:e.ruleForm.phone,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ruleForm.phone=l),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),s(n,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[s(u,{label:"邮箱",prop:"email"},{"default":i((()=>[s(F,{modelValue:e.ruleForm.email,"onUpdate:modelValue":l[4]||(l[4]=l=>e.ruleForm.email=l),placeholder:"请输入",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),s(n,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[s(u,{label:"排序"},{"default":i((()=>[s(V,{modelValue:e.ruleForm.orderNum,"onUpdate:modelValue":l[5]||(l[5]=l=>e.ruleForm.orderNum=l),min:0,max:999,"controls-position":"right",placeholder:"请输入排序","class":"w100"},null,8,["modelValue"])])),_:1})])),_:1}),s(n,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[s(u,{label:"组织状态"},{"default":i((()=>[s(w,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[6]||(l[6]=l=>e.ruleForm.status=l),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"启","inactive-text":"禁"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}]]);export{w as default};