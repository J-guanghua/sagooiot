import{_ as a,b as e,E as t}from"./index.1709626208081.js";import{d as l,h as o,a1 as s,aa as r,a as d,Y as m,S as n,e as i,ah as u,o as p,b as f,W as c,X as D,V as g}from"./vue.1709626208081.js";const h={parentId:-1,postName:"",postSort:0,status:1,remark:""},b=l({name:"systemEditPost",setup(a,{emit:l}){const d=o(null),m=o(),n=s({loading:!1,isShowDialog:!1,postData:[],formData:{...h},rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]},menuExpand:!1,menuNodeAll:!1,menuCheckStrictly:!1,menuProps:{children:"children",label:"title"}}),u=()=>{n.isShowDialog=!1},p=()=>{n.menuCheckStrictly=!1,n.menuExpand=!1,n.menuNodeAll=!1,n.formData={...h}};return{openDialog:a=>{p(),e.post.getList({status:1}).then((a=>{n.postData=a||[]})),a&&(n.formData=a),n.isShowDialog=!0},closeDialog:u,onCancel:()=>{u()},onSubmit:()=>{const a=i(d);a&&a.validate((a=>{a&&(n.loading=!0,n.formData.parentId||(n.formData.parentId=-1),n.formData.postId?e.post.edit(n.formData).then((()=>{t.success("岗位修改成功"),u(),l("getPostList")}))["finally"]((()=>{n.loading=!1})):e.post.add(n.formData).then((()=>{t.success("岗位添加成功"),u(),l("getPostList")}))["finally"]((()=>{n.loading=!1})))}))},menuRef:m,formRef:d,...r(n)}}}),V={"class":"system-edit-post-container"},S={key:0},_={"class":"dialog-footer"};var k=a(b,[["render",function(a,e,t,l,o,s){const r=u("el-cascader"),i=u("el-form-item"),h=u("el-col"),b=u("el-input"),k=u("el-input-number"),v=u("el-switch"),x=u("el-form"),y=u("el-button"),I=u("el-dialog");return p(),d("div",V,[m(I,{modelValue:a.isShowDialog,"onUpdate:modelValue":e[5]||(e[5]=e=>a.isShowDialog=e),title:(a.formData.postId?"修改":"添加")+"岗位",width:"769px"},{footer:n((()=>[f("span",_,[m(y,{onClick:a.onCancel},{"default":n((()=>[c("取 消")])),_:1},8,["onClick"]),m(y,{type:"primary",onClick:a.onSubmit,loading:a.loading},{"default":n((()=>[c(D(0===a.formData.postId?"新 增":"修 改"),1)])),_:1},8,["onClick","loading"])])])),"default":n((()=>[m(x,{ref:"formRef",model:a.formData,rules:a.rules,"label-width":"90px"},{"default":n((()=>[m(h,{xs:24,sm:24,md:24,lg:24,xl:24,"class":"mb20"},{"default":n((()=>[m(i,{label:"上级岗位"},{"default":n((()=>[m(r,{options:a.postData,props:{checkStrictly:!0,emitPath:!1,value:"postId",label:"postName"},placeholder:"请选择岗位",clearable:"","class":"w100",modelValue:a.formData.parentId,"onUpdate:modelValue":e[0]||(e[0]=e=>a.formData.parentId=e)},{"default":n((({node:a,data:e})=>[f("span",null,D(e.postName),1),a.isLeaf?g("",!0):(p(),d("span",S," ("+D(e.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1})])),_:1}),m(i,{label:"岗位名称",prop:"postName"},{"default":n((()=>[m(b,{modelValue:a.formData.postName,"onUpdate:modelValue":e[1]||(e[1]=e=>a.formData.postName=e),modelModifiers:{trim:!0},placeholder:"请输入岗位名称"},null,8,["modelValue"])])),_:1}),m(i,{label:"岗位顺序",prop:"postSort"},{"default":n((()=>[m(k,{modelValue:a.formData.postSort,"onUpdate:modelValue":e[2]||(e[2]=e=>a.formData.postSort=e),"controls-position":"right",min:0},null,8,["modelValue"])])),_:1}),m(i,{label:"岗位状态",prop:"status"},{"default":n((()=>[m(v,{modelValue:a.formData.status,"onUpdate:modelValue":e[3]||(e[3]=e=>a.formData.status=e),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"启","inactive-text":"禁"},null,8,["modelValue"])])),_:1}),m(i,{label:"备注",prop:"remark"},{"default":n((()=>[m(b,{modelValue:a.formData.remark,"onUpdate:modelValue":e[4]||(e[4]=e=>a.formData.remark=e),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}],["__scopeId","data-v-25155bfa"]]);export{k as default};