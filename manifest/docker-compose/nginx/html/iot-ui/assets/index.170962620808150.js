import e from"./edit.170962620808116.js";import{j as a,l as t,k as s,h as l,E as o}from"./index.1709626208081.js";import{u as i}from"./useCommon.1709626208081.js";import{d as n,h as r,a as d,Y as p,S as m,e as u,ah as c,ar as f,o as g,T as y,R as w,W as h,V as v}from"./vue.1709626208081.js";import"./validator.1709626208081.js";import"./index.17096262080819.js";var _=e=>t("/system/message/del",{ids:e}),b=e=>a("/system/message/list",e),k=e=>s("/system/message/read",{id:e});const x={"class":"page"},j=n({__name:"index",setup(a){const t=r(),{params:s,tableData:n,getList:j,loading:z}=i(b,"Info",{name:"",address:"",types:-1});j();return(a,i)=>{const r=c("el-table-column"),b=c("el-tag"),C=c("el-button"),I=c("el-table"),R=c("pagination"),M=c("el-card"),S=f("loading");return g(),d("div",x,[p(M,{shadow:"nover"},{"default":m((()=>[y((g(),w(I,{data:u(n),style:{width:"100%"}},{"default":m((()=>[p(r,{type:"index",label:"序号",width:"60",align:"center"}),p(r,{prop:"MessageInfo.title",label:"标题","show-overflow-tooltip":""}),p(r,{prop:"MessageInfo.content",label:"内容","show-overflow-tooltip":""}),p(r,{prop:"MessageInfo.createdAt",label:"发生时间",width:"160"}),p(r,{prop:"",label:"状态","min-width":"100",align:"center"},{"default":m((e=>[e.row.isRead?(g(),w(b,{key:0,type:"success",size:"small"},{"default":m((()=>[h("已读")])),_:1})):(g(),w(b,{key:1,type:"info",size:"small"},{"default":m((()=>[h("未读")])),_:1}))])),_:1}),p(r,{label:"操作",width:"150",align:"center"},{"default":m((e=>[e.row.isRead?v("",!0):(g(),w(C,{key:0,size:"small",text:"",type:"primary",onClick:a=>{return t=e.row,void k(t.id).then((()=>{o.success("已读成功"),j()}));var t}},{"default":m((()=>[h("设为已读")])),_:2},1032,["onClick"])),p(C,{size:"small",text:"",type:"info",onClick:a=>{return t=e.row,void l.confirm("确定删除该条记录?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((async()=>{await _([t.id]),o.success("删除成功"),j()}));var t}},{"default":m((()=>[h("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[S,u(z)]]),u(s).total?(g(),w(R,{key:0,total:u(s).total,page:u(s).pageNum,"onUpdate:page":i[0]||(i[0]=e=>u(s).pageNum=e),limit:u(s).pageSize,"onUpdate:limit":i[1]||(i[1]=e=>u(s).pageSize=e),onPagination:i[2]||(i[2]=e=>u(j)())},null,8,["total","page","limit"])):v("",!0)])),_:1}),p(e,{ref_key:"editFormRef",ref:t,onGetList:i[3]||(i[3]=e=>u(j)(1))},null,512)])}}});export{j as default};