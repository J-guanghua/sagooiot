import{a as e}from"./index.170962620808122.js";import{E as l}from"./index.1709626208081.js";import{d as a,h as u,a1 as t,R as o,S as d,ah as n,o as p,b as s,Y as i,W as r,a as m,a7 as v,F as y,a9 as c,X as b}from"./vue.1709626208081.js";const f={"class":"dialog-footer"},V=a({__name:"setAttr",props:{deviceKey:String},setup(a,{expose:V}){const h=a,k=u(!1),_=u(!1),T=u([]),g={key:"",name:"",accessMode:0,valueType:{type:"",unit:"",elements:[]},value:""},x=t({...g});function U(){if(""===x.value||null===x.value||void 0===x.value)return l("请先输入属性值！");_.value=!0,e.product.propertySet({deviceKey:h.deviceKey,params:{[x.key]:x.value}}).then((()=>{Object.assign(x,{...g}),k.value=!1,l.success("操作成功")}))["finally"]((()=>_.value=!1))}return e.product.getDataType({status:-1}).then((e=>{const l=Object.values(e.dataType);l.forEach(((e,a)=>{0==a?(l[a].label="基础类型",l[a].options=e):(l[a].label="扩展类型",l[a].options=e)})),T.value=l||[]})),V({show:function(e){Object.assign(x,e),k.value=!0}}),(e,l)=>{const a=n("el-input"),u=n("el-form-item"),t=n("el-option"),V=n("el-option-group"),h=n("el-select"),g=n("el-form"),j=n("el-button"),w=n("el-dialog");return p(),o(w,{title:"设置属性",modelValue:k.value,"onUpdate:modelValue":l[7]||(l[7]=e=>k.value=e),width:"600px","append-to-body":""},{footer:d((()=>[s("span",f,[i(j,{onClick:l[6]||(l[6]=e=>k.value=!1)},{"default":d((()=>[r("取 消")])),_:1}),i(j,{type:"primary",onClick:U,loading:_.value},{"default":d((()=>[r("设 置")])),_:1},8,["loading"])])])),"default":d((()=>[i(g,{model:x,ref:"queryRef","label-width":"68px"},{"default":d((()=>[i(u,{label:"属性标识",prop:"key"},{"default":d((()=>[i(a,{modelValue:x.key,"onUpdate:modelValue":l[0]||(l[0]=e=>x.key=e),disabled:"",placeholder:"请输入属性标识",clearable:""},null,8,["modelValue"])])),_:1}),i(u,{label:"属性名称",prop:"name"},{"default":d((()=>[i(a,{modelValue:x.name,"onUpdate:modelValue":l[1]||(l[1]=e=>x.name=e),disabled:"",placeholder:"请输入属性名称",clearable:""},null,8,["modelValue"])])),_:1}),i(u,{label:"数据类型",prop:"type"},{"default":d((()=>[i(h,{modelValue:x.valueType.type,"onUpdate:modelValue":l[2]||(l[2]=e=>x.valueType.type=e),placeholder:"请选择数据类型",disabled:"",style:{width:"100%"}},{"default":d((()=>[(p(!0),m(y,null,v(T.value,(e=>(p(),o(V,{key:e.label,label:e.label},{"default":d((()=>[(p(!0),m(y,null,v(e.options,(e=>(p(),o(t,{key:e.type,label:e.title,value:e.type},null,8,["label","value"])))),128))])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(u,{label:"属性值",prop:"value"},{"default":d((()=>[["int","long","float","double","date"].includes(x.valueType.type)?(p(),o(a,{key:0,type:"number",modelValue:x.value,"onUpdate:modelValue":l[3]||(l[3]=e=>x.value=e),modelModifiers:{number:!0},placeholder:"请输入属性值",clearable:""},c({_:2},[x.valueType.unit?{name:"append",fn:d((()=>[r(b(x.valueType.unit),1)])),key:"0"}:void 0]),1032,["modelValue"])):["enum"].includes(x.valueType.type)?(p(),o(h,{key:1,modelValue:x.value,"onUpdate:modelValue":l[4]||(l[4]=e=>x.value=e),clearable:"",style:{wdith:"100% !important"}},{"default":d((()=>[(p(!0),m(y,null,v(x.valueType.elements,(e=>(p(),o(t,{key:e.value,value:e.value,label:e.text},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])):(p(),o(a,{key:2,modelValue:x.value,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value=e),placeholder:"请输入属性值",clearable:""},c({_:2},[x.valueType.unit?{name:"append",fn:d((()=>[r(b(x.valueType.unit),1)])),key:"0"}:void 0]),1032,["modelValue"]))])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])}}});export{V as default};