import{e}from"./rsa.1709626208081.js";import{b as a,E as s}from"./index.1709626208081.js";import{d as o,h as l,a1 as r,l as u,R as d,S as t,ah as i,o as n,Y as m,W as c,b as p,M as f}from"./vue.1709626208081.js";const w=o({__name:"changePwd",setup(o,{expose:w}){const g=l(),P=l(!1),v=l(!1),U=l(!1),h=r({userName:"",oldUserPassword:"",userPassword:""}),_=u((()=>({userName:[{required:!0,trigger:"change",message:"用户名不能为空"}],oldUserPassword:[{required:!0,trigger:"change",message:"旧密码不能为空"}],userPassword:[{required:!0,trigger:"change",message:"新密码不能为空"}]})));async function x(){let o,l;await g.value.validate(),sessionStorage.isRsaEnabled?(o=await e(h.oldUserPassword),l=await e(h.userPassword)):(o=h.oldUserPassword,l=h.userPassword),a.login.editPassword({userName:h.userName,oldUserPassword:o,userPassword:l}).then((()=>{P.value=!1,s.success("修改成功")}))}return w({toShow:function(e){h.userName=e.userName,h.oldUserPassword=e.oldUserPassword,P.value=!0}}),(e,a)=>{const s=i("ele-User"),o=i("el-icon"),l=i("el-input"),r=i("el-form-item"),u=i("ele-Unlock"),w=i("el-form"),y=i("el-button"),V=i("el-dialog");return n(),d(V,{title:"更新密码",modelValue:P.value,"onUpdate:modelValue":a[5]||(a[5]=e=>P.value=e),width:"500px","show-close":!1,"destroy-on-close":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t((()=>[m(y,{type:"primary",onClick:x},{"default":t((()=>[c("更 换")])),_:1})])),"default":t((()=>[m(w,{ref_key:"formRef",ref:g,model:h,rules:_.value},{"default":t((()=>[m(r,{prop:"userName"},{"default":t((()=>[m(l,{type:"text",placeholder:"请输入用户名",modelValue:h.userName,"onUpdate:modelValue":a[0]||(a[0]=e=>h.userName=e),clearable:"",autocomplete:"off"},{prefix:t((()=>[m(o,null,{"default":t((()=>[m(s)])),_:1})])),_:1},8,["modelValue"])])),_:1}),m(r,{"class":"login-animation2",prop:"oldUserPassword"},{"default":t((()=>[m(l,{type:v.value?"text":"password",placeholder:"请输入旧密码",modelValue:h.oldUserPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>h.oldUserPassword=e),autocomplete:"off"},{prefix:t((()=>[m(o,null,{"default":t((()=>[m(u)])),_:1})])),suffix:t((()=>[p("i",{"class":f(["iconfont",v.value?"icon-yincangmima":"icon-xianshimima"]),onClick:a[1]||(a[1]=e=>v.value=!v.value)},null,2)])),_:1},8,["type","modelValue"])])),_:1}),m(r,{"class":"login-animation2",prop:"userPassword"},{"default":t((()=>[m(l,{type:U.value?"text":"password",placeholder:"请输入新密码",modelValue:h.userPassword,"onUpdate:modelValue":a[4]||(a[4]=e=>h.userPassword=e),autocomplete:"off"},{prefix:t((()=>[m(o,null,{"default":t((()=>[m(u)])),_:1})])),suffix:t((()=>[p("i",{"class":f(["iconfont",U.value?"icon-yincangmima":"icon-xianshimima"]),onClick:a[3]||(a[3]=e=>U.value=!U.value)},null,2)])),_:1},8,["type","modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}}});export{w as default};