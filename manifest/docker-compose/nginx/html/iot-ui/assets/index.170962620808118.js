import{d as e,h as l,a1 as t,K as a,R as o,S as i,j as n,ah as r,ar as s,o as u,Y as d,W as p,T as m,a8 as f,b as c,X as h,V as w,e as y}from"./vue.1709626208081.js";import _ from"./editMenu.1709626208081.js";import{b,h as v,E as g}from"./index.1709626208081.js";import k from"./btn.1709626208081.js";import C from"./list.1709626208081.js";import T from"./api.1709626208081.js";import"./btn-form.1709626208081.js";import"./validator.1709626208081.js";import"./list-form.1709626208081.js";import"./bind.17096262080812.js";const x={"class":"ml10"},z=e({__name:"index",setup(e){const z=l(),j=l(),A=l(),L=l(),D=l(),q=t({loading:!1,queryParams:{title:"",component:"",status:-1},menuTableData:[]}),{proxy:M}=n(),{sys_show_hide:P}=M.useDict("sys_show_hide"),R=l("add"),S=e=>{R.value="add",z.value.openDialog(e)},V=(e,l)=>"buttonAuthorizeList"===l?A.value.open(e):"listAuthorizeList"===l?L.value.open(e):"apiAuthorizeList"===l?D.value.open(e):void 0;a((()=>{B()}));const H=()=>{B()},B=()=>{q.loading=!0,b.menu.getList(q.queryParams).then((e=>{q.menuTableData=e||[]}))["finally"]((()=>q.loading=!1))};return(e,l)=>{const t=r("el-input"),a=r("el-form-item"),n=r("ele-Search"),F=r("el-icon"),K=r("el-button"),O=r("ele-Refresh"),$=r("ele-FolderAdd"),E=r("el-form"),I=r("SvgIcon"),U=r("el-table-column"),W=r("el-tag"),X=r("ele-ArrowDown"),Y=r("el-dropdown-item"),G=r("el-dropdown-menu"),J=r("el-dropdown"),N=r("el-table"),Q=r("el-card"),Z=s("auth"),ee=s("col"),le=s("loading");return u(),o(Q,{shadow:"nover","class":"page"},{"default":i((()=>[d(E,{model:q.queryParams,inline:"",ref_key:"queryRef",ref:j,onKeyup:l[3]||(l[3]=f((e=>H()),["enter"]))},{"default":i((()=>[d(a,{label:"菜单名称",prop:"title"},{"default":i((()=>[d(t,{modelValue:q.queryParams.title,"onUpdate:modelValue":l[0]||(l[0]=e=>q.queryParams.title=e),placeholder:"请输入菜单名称",clearable:"","class":"w-50"},null,8,["modelValue"])])),_:1}),d(a,null,{"default":i((()=>[d(K,{type:"primary","class":"ml10",onClick:H},{"default":i((()=>[d(F,null,{"default":i((()=>[d(n)])),_:1}),p(" 查询 ")])),_:1}),d(K,{onClick:l[1]||(l[1]=e=>(j.value.resetFields(),void H()))},{"default":i((()=>[d(F,null,{"default":i((()=>[d(O)])),_:1}),p(" 重置 ")])),_:1}),m((u(),o(K,{type:"primary","class":"ml10",onClick:l[2]||(l[2]=e=>S(null))},{"default":i((()=>[d(F,null,{"default":i((()=>[d($)])),_:1}),p(" 新增菜单 ")])),_:1})),[[Z,"add"]])])),_:1})])),_:1},8,["model"]),m((u(),o(N,{data:q.menuTableData,"default-expand-all":!1,style:{width:"100%"},"row-key":"path","tree-props":{children:"children",hasChildren:"hasChildren"}},{"default":i((()=>[m((u(),o(U,{label:"菜单名称","show-overflow-tooltip":""},{"default":i((e=>[d(I,{name:e.row.icon},null,8,["name"]),c("span",x,h(e.row.title),1)])),_:1})),[[ee,"title"]]),m(d(U,{prop:"path",label:"路由路径","show-overflow-tooltip":""},null,512),[[ee,"path"]]),m(d(U,{label:"组件路径",prop:"component","show-overflow-tooltip":""},null,512),[[ee,"component"]]),m(d(U,{label:"排序",prop:"weigh",width:"80",align:"center"},null,512),[[ee,"weigh"]]),m((u(),o(U,{label:"类型",width:"80",align:"center"},{"default":i((e=>[d(W,{type:0===e.row.menuType?"info":1===e.row.menuType?"success":"warning",size:"small"},{"default":i((()=>[p(h(0===e.row.menuType?"目录":1===e.row.menuType?"菜单":"按钮"),1)])),_:2},1032,["type"])])),_:1})),[[ee,"menuType"]]),m((u(),o(U,{prop:"isHide",label:"显示状态",align:"center",width:"120"},{"default":i((({row:e})=>[p(h(e.isHide?"隐藏":"显示"),1)])),_:1})),[[ee,"isHide"]]),m((u(),o(U,{label:"操作",width:"200",align:"center",fixed:"right"},{"default":i((e=>[e.row.menuType?w("",!0):m((u(),o(K,{key:0,size:"small",type:"text",onClick:l=>S(e.row)},{"default":i((()=>[p("新增")])),_:2},1032,["onClick"])),[[Z,"add"]]),m((u(),o(K,{size:"small",text:"",type:"warning",onClick:l=>{return t=e.row,R.value="edit",void z.value.openDialog(t);var t}},{"default":i((()=>[p("修改")])),_:2},1032,["onClick"])),[[Z,"edit"]]),m((u(),o(K,{size:"small",text:"",type:"info",onClick:l=>{return t=e.row,void v.confirm(`此操作将永久删除菜单：“${t.title}”, 是否继续?`,"提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((()=>{b.menu.del(t.id).then((()=>{g.success("删除成功"),M.$refs.editMenuRef.resetMenuSession(),B()}))}))["catch"]((()=>{}));var t}},{"default":i((()=>[p("删除")])),_:2},1032,["onClick"])),[[Z,"del"]]),e.row.menuType?(u(),o(J,{key:1},{dropdown:i((()=>[d(G,null,{"default":i((()=>[m((u(),o(Y,{onClick:l=>V(e.row,"buttonAuthorizeList")},{"default":i((()=>[p("按钮权限")])),_:2},1032,["onClick"])),[[Z,"btn"]]),m((u(),o(Y,{onClick:l=>V(e.row,"listAuthorizeList")},{"default":i((()=>[p("列表权限")])),_:2},1032,["onClick"])),[[Z,"list"]]),m((u(),o(Y,{onClick:l=>V(e.row,"apiAuthorizeList")},{"default":i((()=>[p("接口权限")])),_:2},1032,["onClick"])),[[Z,"list"]])])),_:2},1024)])),"default":i((()=>[m((u(),o(K,{type:"text",size:"small",style:{"margin-top":"1px","margin-left":"10px"}},{"default":i((()=>[p("更多 "),d(F,null,{"default":i((()=>[d(X)])),_:1})])),_:1})),[[Z,"more"]])])),_:2},1024)):w("",!0)])),_:1})),[[ee,"handle"]])])),_:1},8,["data"])),[[le,q.loading]]),d(_,{ref_key:"editMenuRef",ref:z,onMenuList:B,menu:q.menuTableData,visibleOptions:y(P),acType:R.value},null,8,["menu","visibleOptions","acType"]),d(k,{ref_key:"buttonAuthorizeList",ref:A},null,512),d(C,{ref_key:"listAuthorizeList",ref:L},null,512),d(T,{ref_key:"apiAuthorizeList",ref:D},null,512)])),_:1})}}});export{z as default};