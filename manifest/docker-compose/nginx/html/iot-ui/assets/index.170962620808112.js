import{d as e,h as l,a,Y as t,S as o,e as n,ah as s,ar as i,o as d,a8 as r,W as p,T as u,R as m,V as c}from"./vue.1709626208081.js";import f from"./edit.17096262080812.js";import y from"./bind.1709626208081.js";import{b as h,h as _,E as g}from"./index.1709626208081.js";import{u as w}from"./useCommon.1709626208081.js";import"./validator.1709626208081.js";import"./index.17096262080819.js";const b={"class":"page"},v=e({__name:"index",setup(e){const v=l(),k=l(),x=l();l(!1);const C=l([]),{params:V,tableData:j,getList:z,loading:S}=w(h.api.getList,"Info",{name:"",address:"",types:-1});z();const U=async e=>{if(e){const l=await h.api.detail(e.id);v.value.open(l)}else v.value.open()},L=e=>{C.value=e.filter((e=>2===e.types)).map((e=>e.id))};return(e,l)=>{const w=s("el-input"),C=s("el-form-item"),R=s("el-option"),T=s("el-select"),B=s("ele-Search"),D=s("el-icon"),F=s("el-button"),G=s("ele-FolderAdd"),I=s("el-form"),K=s("el-table-column"),N=s("el-tag"),q=s("el-table"),A=s("pagination"),E=s("el-card"),P=i("auth"),W=i("col"),Y=i("loading");return d(),a("div",b,[t(E,{shadow:"nover"},{"default":o((()=>[t(I,{model:n(V),inline:"",ref_key:"queryRef",ref:x},{"default":o((()=>[t(C,{label:"接口名称",prop:"name"},{"default":o((()=>[t(w,{modelValue:n(V).name,"onUpdate:modelValue":l[0]||(l[0]=e=>n(V).name=e),placeholder:"请输入接口名称",clearable:"",style:{width:"180px"},onKeyup:l[1]||(l[1]=r((e=>n(z)(1)),["enter","native"]))},null,8,["modelValue"])])),_:1}),t(C,{label:"接口地址",prop:"address"},{"default":o((()=>[t(w,{modelValue:n(V).address,"onUpdate:modelValue":l[2]||(l[2]=e=>n(V).address=e),placeholder:"请输入接口地址",clearable:"",style:{width:"180px"},onKeyup:l[3]||(l[3]=r((e=>n(z)(1)),["enter","native"]))},null,8,["modelValue"])])),_:1}),t(C,{label:"状态",prop:"status"},{"default":o((()=>[t(T,{modelValue:n(V).status,"onUpdate:modelValue":l[4]||(l[4]=e=>n(V).status=e),placeholder:"接口状态",clearable:"",style:{width:"120px"}},{"default":o((()=>[t(R,{label:"全部",value:-1}),t(R,{label:"启用",value:1}),t(R,{label:"禁用",value:0})])),_:1},8,["modelValue"])])),_:1}),t(C,null,{"default":o((()=>[t(F,{type:"primary","class":"ml10",onClick:l[5]||(l[5]=e=>n(z)(1))},{"default":o((()=>[t(D,null,{"default":o((()=>[t(B)])),_:1}),p(" 查询 ")])),_:1}),u((d(),m(F,{type:"primary",onClick:l[6]||(l[6]=e=>U())},{"default":o((()=>[t(D,null,{"default":o((()=>[t(G)])),_:1}),p(" 新增接口 ")])),_:1})),[[P,"add"]])])),_:1})])),_:1},8,["model"]),u((d(),m(q,{data:n(j),onSelectionChange:L,style:{width:"100%"},"expand-row-keys":[],"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{"default":o((()=>[u(t(K,{type:"selection",width:"55",align:"center"},null,512),[[W,"selection"]]),t(K,{prop:"id",label:"ID",width:"120",align:"center"}),u(t(K,{prop:"name",label:"接口名称","show-overflow-tooltip":""},null,512),[[W,"name"]]),u(t(K,{prop:"address",label:"接口地址","show-overflow-tooltip":""},null,512),[[W,"address"]]),u((d(),m(K,{prop:"status",label:"状态","min-width":"100",align:"center"},{"default":o((e=>[e.row.status?(d(),m(N,{key:0,type:"success",size:"small"},{"default":o((()=>[p("启用")])),_:1})):(d(),m(N,{key:1,type:"info",size:"small"},{"default":o((()=>[p("禁用")])),_:1}))])),_:1})),[[W,"status"]]),u((d(),m(K,{label:"操作",width:"100",align:"center"},{"default":o((e=>[u((d(),m(F,{size:"small",text:"",type:"warning",onClick:l=>U(e.row)},{"default":o((()=>[p("修改")])),_:2},1032,["onClick"])),[[P,"edit"]]),u((d(),m(F,{size:"small",text:"",type:"info",onClick:l=>{return a=e.row,void _.confirm(`此操作将删除接口：“${a.name}”，是否继续?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((async()=>{await h.api.del(a.id),g.success("删除成功"),z()}));var a}},{"default":o((()=>[p("删除")])),_:2},1032,["onClick"])),[[P,"del"]])])),_:1})),[[W,"handle"]])])),_:1},8,["data"])),[[Y,n(S)]]),n(V).total?(d(),m(A,{key:0,total:n(V).total,page:n(V).pageNum,"onUpdate:page":l[7]||(l[7]=e=>n(V).pageNum=e),limit:n(V).pageSize,"onUpdate:limit":l[8]||(l[8]=e=>n(V).pageSize=e),onPagination:l[9]||(l[9]=e=>n(z)())},null,8,["total","page","limit"])):c("",!0)])),_:1}),t(f,{ref_key:"editFormRef",ref:v,onGetList:l[10]||(l[10]=e=>n(z)(1))},null,512),t(y,{ref_key:"bindRef",ref:k,onGetList:l[11]||(l[11]=e=>n(z)(1))},null,512)])}}});export{v as default};