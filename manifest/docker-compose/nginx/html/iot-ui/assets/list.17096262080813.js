import{d as e,a1 as a,k as t,aa as l,a as n,T as r,R as o,S as s,Y as i,F as d,aE as p,j as c,e as u,ah as g,ar as m,o as f,W as h,b as k,M as y}from"./vue.1709626208081.js";import{a as w}from"./index.170962620808130.js";import{_ as C,E as z,h as S}from"./index.1709626208081.js";const b=e({name:"tunnel",props:{keyWord:{type:Object,"default":()=>{}}},setup(e){const n=p(),{proxy:r}=c(),{network_server_type:o}=r.useDict("network_server_type"),s=a({data:[],total:0,loading:!1,param:{page:1,pageSize:10},isShowMore:!0}),i=()=>{s.loading=!0;let a={keyWord:e.keyWord,pageNum:s.param.page,PageSize:s.param.pageSize};w.server.getList(a).then((e=>{const{list:a,total:t,page:l}=e;s.data=a,s.total=t,s.param.page=l,s.loading=!1}))};return t((()=>{i()})),{fetchList:i,toDetail:e=>{n.push(`/iotmanager/network/server/detail/${e}`)},toEdit:e=>{n.push(`/iotmanager/network/server/edit/${e}`)},typesFormat:e=>r.selectDictLabel(u(o),e),onChangeStatus:(e,a)=>{w.server.changeServerStatus({id:e,status:a}).then((()=>{z.success(a?"已开启":"已关闭"),i()}))},onRowDel:e=>{S.confirm(`此操作将永久删除“${e.name}”，是否继续?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{w.server.deleteItem({ids:[e.id]}).then((()=>{i(),z.success("删除成功")}))}))["catch"]((()=>{}))},onHandleSizeChange:e=>{s.param.pageSize=e,i()},onHandleCurrentChange:e=>{s.param.page=e,i()},...l(s)}}}),_={"class":"more-opearte-wrap"};var v=C(b,[["render",function(e,a,t,l,p,c){const u=g("el-table-column"),w=g("el-tag"),C=g("el-button"),z=g("el-divider"),S=g("el-popover"),b=g("el-table"),v=g("el-pagination"),x=m("col"),D=m("auth"),j=m("loading");return f(),n(d,null,[r((f(),o(b,{data:e.data,style:{width:"100%"}},{"default":s((()=>[r(i(u,{align:"center",prop:"id",label:"ID",width:"100"},null,512),[[x,"id"]]),r(i(u,{align:"center",prop:"name",label:"名称"},null,512),[[x,"name"]]),r(i(u,{align:"center",prop:"types",label:"类型",formatter:a=>e.typesFormat(a.types)},null,8,["formatter"]),[[x,"types"]]),r(i(u,{align:"center",prop:"addr",label:"地址"},null,512),[[x,"addr"]]),r(i(u,{"show-overflow-tooltip":"",align:"center",prop:"createdAt",label:"创建时间",width:"170"},null,512),[[x,"createdAt"]]),r((f(),o(u,{align:"center",prop:"types",label:"状态"},{"default":s((e=>[e.row.status?(f(),o(w,{key:1,"class":"ml-2",type:"success"},{"default":s((()=>[h("启动")])),_:1})):(f(),o(w,{key:0,"class":"ml-2",type:"info"},{"default":s((()=>[h("未启动")])),_:1}))])),_:1})),[[x,"status"]]),r((f(),o(u,{align:"center",label:"操作",width:"200"},{"default":s((t=>[r((f(),o(C,{onClick:a=>e.toDetail(t.row.id),size:"small",type:"text"},{"default":s((()=>[h("详情")])),_:2},1032,["onClick"])),[[D,"detail"]]),r((f(),o(C,{size:"small",link:"",key:"info",type:"info",onClick:a=>e.toEdit(t.row.id)},{"default":s((()=>[h("编辑")])),_:2},1032,["onClick"])),[[D,"edit"]]),i(S,{placement:"bottom",width:170,trigger:"click"},{reference:s((()=>[r((f(),o(C,{size:"small",type:"text","class":"more-btn",onClick:a[0]||(a[0]=a=>e.isShowMore=!e.isShowMore)},{"default":s((()=>[h("更多 "),k("i",{style:{"margin-left":"2px"},"class":y(e.isShowMore?"fa fa-angle-down":"fa fa-angle-up")},null,2)])),_:1})),[[D,"more"]])])),"default":s((()=>[k("div",_,[r((f(),o(C,{onClick:a=>e.onChangeStatus(t.row.id,1),disabled:t.row.status,link:"",size:"small",key:"success",type:"success"},{"default":s((()=>[h("启 用")])),_:2},1032,["onClick","disabled"])),[[D,"on"]]),i(z,{direction:"vertical"}),r((f(),o(C,{onClick:a=>e.onChangeStatus(t.row.id,0),disabled:!t.row.status,link:"",size:"small",key:"warning",type:"warning"},{"default":s((()=>[h("禁 用")])),_:2},1032,["onClick","disabled"])),[[D,"off"]]),i(z,{direction:"vertical"}),r((f(),o(C,{onClick:a=>e.onRowDel(t.row),link:"",size:"small",key:"danger",type:"danger"},{"default":s((()=>[h("删 除")])),_:2},1032,["onClick"])),[[D,"delete"]])])])),_:2},1024)])),_:1})),[[x,"auth"]])])),_:1},8,["data"])),[[j,e.loading]]),i(v,{onSizeChange:e.onHandleSizeChange,onCurrentChange:e.onHandleCurrentChange,"class":"mt15","pager-count":5,"page-sizes":[10,20,30,50,100,200,300,500],"current-page":e.param.page,"onUpdate:currentPage":a[1]||(a[1]=a=>e.param.page=a),background:"","page-size":e.param.pageSize,"onUpdate:pageSize":a[2]||(a[2]=a=>e.param.pageSize=a),layout:"total, sizes, prev, pager, next, jumper",total:e.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])],64)}],["__scopeId","data-v-617d93f0"]]);export{v as default};