import{i as e,L as t}from"./echarts.1709626208081.js";import"./wordCloud.1709626208081.js";import{_ as a,g as s,d as l}from"./index.1709626208081.js";import{d as o,a1 as n,h as r,k as i,aa as d,T as c,a as u,Y as f,S as m,b as h,ah as p,ar as g,o as y,X as v,W as b,j as x,aA as _,aB as I}from"./vue.1709626208081.js";const S=o({name:"monitor",components:{},setup(){const{proxy:a}=x(),o=n({sysInfo:{}}),c=r(!0);let u,f,m,h,p,g;const y=n({bootTime:"2022-11-24T11:12:13+08:00",hostId:"8be74718-1a53-4208-be22-9c126d891ddd",hostname:"iZ2zee04uvnkmhvglw9oghZ",intranet_ip:"172.17.47.62",kernelArch:"x86_64",kernelVersion:"3.10.0-1127.19.1.el7.x86_64",os:"linux",platform:"centos",platformFamily:"rhel",platformVersion:"7.7.1908",procs:138,public_ip:"101.200.198.249",uptime:6393278,virtualizationRole:"guest",virtualizationSystem:""}),v=n({goOs:"-",arch:"-",goVersion:"-",goMem:"-",goName:"-",goSize:"-",goroutine:"-",pwd:"-",rootPath:"-",runTime:"",startTime:"-",intranet_ip:"-"});function b(e){const t=JSON.parse(e.data);Object.assign(v,t),c.value=!1}function _(e){const t=JSON.parse(e.data);Object.assign(y,t),c.value=!1}const I={name:[],value:[]},S={name:[],value:[]},w={name:[],value:[]},L={tooltip:{trigger:"axis"},grid:{top:5,bottom:5,left:5,right:30,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],axisLabel:{formatter:"{value}%"},splitLine:{show:!1}},series:[{name:"使用率",type:"line",showSymbol:!1,data:[],smooth:!0,lineStyle:{width:0},areaStyle:{}}]};function O(e){u.setOption({series:[{data:[{value:e,name:""}]}]})}function F(e){f.setOption({series:[{data:[{value:e,name:""}]}]})}function z(e){m.setOption({series:[{data:[{value:e,name:""}]}]})}function U(e,t,a){t.name.push(l().format("HH:mm:ss")),t.value.push(a),t.name.length>20&&(t.name.shift(),t.value.shift()),e.setOption({xAxis:{data:t.name},series:[{data:t.value}]})}function T(e){const t=JSON.parse(e.data);o.sysInfo.os=t.os,o.sysInfo.kernelArch=t.kernelArch,o.sysInfo.sysComputerName=t.hostname,o.sysInfo.goStartTime=t.bootTime,o.sysInfo.goRunTime=t.uptime,c.value=!1}function k(e){const t=JSON.parse(e.data);F(t.usedPercent.toFixed(2)),o.sysInfo.memTotal=t.total,o.sysInfo.memUsed=t.used,o.sysInfo.available=t.available,o.sysInfo.goUsed=t.goUsed,o.sysInfo.memUsage=t.usedPercent.toFixed(2),U(p,S,o.sysInfo.memUsage),c.value=!1}function A(e){const t=JSON.parse(e.data);o.sysInfo.cpuNum=t.Number,o.sysInfo.cpuCores=t.Cores,o.sysInfo.cpuUsed=t.UsedPercent[0].toFixed(2),O(t.UsedPercent[0].toFixed(2)),U(h,I,o.sysInfo.cpuUsed),c.value=!1}function C(e){const t=JSON.parse(e.data);o.sysInfo.cpuAvg5=t.load5.toFixed(2),o.sysInfo.cpuAvg15=t.load15.toFixed(2),c.value=!1}function N(e){const t=JSON.parse(e.data);o.sysInfo.diskTotal=t.total,o.sysInfo.diskUsed=t.used,o.sysInfo.diskUsedPercent=t.usedPercent.toFixed(2),z(t.usedPercent.toFixed(2)),U(g,w,o.sysInfo.diskUsedPercent),c.value=!1}return i((()=>{u=e(a.$refs.chartsWarningRef1),u.setOption({tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{type:"gauge",name:"CPU",radius:"90%",title:{show:!0,fontSize:12,color:"green",offsetCenter:[-2,"30%"]},axisLine:{lineStyle:{show:!0,"with":25,color:[[.3,"#4dabf7"],[.6,"#69db7c"],[.8,"#ffa94d"],[1,"#ff6b6b"]]}},axisTick:{distance:0,length:4,lineStyle:{color:"auto",width:1}},axisLabel:{distance:12,color:"#888",fontSize:12},splitLine:{length:5,distance:2,lineStyle:{width:1,color:"auto"}},splitNumber:5,detail:{valueAnimation:!0,formatter:"{value}%",textStyle:{fontSize:20,color:"red"},offsetCenter:["0","80%"]}}]}),f=e(a.$refs.chartsWarningRef2),f.setOption({tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{type:"gauge",name:"内存",radius:"90%",title:{show:!0,fontSize:12,color:"green",offsetCenter:[-2,"30%"]},axisLine:{lineStyle:{show:!0,"with":25,color:[[.3,"#4dabf7"],[.6,"#69db7c"],[.8,"#ffa94d"],[1,"#ff6b6b"]]}},axisTick:{distance:0,length:4,lineStyle:{color:"auto",width:1}},axisLabel:{distance:12,color:"#888",fontSize:12},splitLine:{length:5,distance:2,lineStyle:{width:1,color:"auto"}},splitNumber:5,detail:{valueAnimation:!0,formatter:"{value}%",textStyle:{fontSize:20,color:"red"},offsetCenter:["0","80%"]}}]}),m=e(a.$refs.chartsWarningRef3),m.setOption({tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{type:"gauge",name:"磁盘",radius:"90%",title:{show:!0,fontSize:12,color:"green",offsetCenter:[-2,"30%"]},axisLine:{lineStyle:{show:!0,"with":25,color:[[.3,"#4dabf7"],[.6,"#69db7c"],[.8,"#ffa94d"],[1,"#ff6b6b"]]}},axisTick:{distance:0,length:4,lineStyle:{color:"auto",width:1}},axisLabel:{distance:12,color:"#888",fontSize:12},splitLine:{length:5,distance:2,lineStyle:{width:1,color:"auto"}},splitNumber:5,detail:{valueAnimation:!0,formatter:"{value}%",textStyle:{fontSize:20,color:"red"},offsetCenter:["0","80%"]}}]}),h=e(a.$refs.chartsWarningRef4),L.series[0].areaStyle={opacity:.8,color:new t(0,0,0,1,[{offset:0,color:"rgb(128, 255, 165)"},{offset:1,color:"rgb(1, 191, 236)"}])},h.setOption(L),p=e(a.$refs.chartsWarningRef5),L.series[0].areaStyle={opacity:.8,color:new t(0,0,0,1,[{offset:0,color:"rgb(0, 221, 255)"},{offset:1,color:"rgb(77, 119, 255)"}])},p.setOption(L),g=e(a.$refs.chartsWarningRef6),L.series[0].areaStyle={opacity:.8,color:new t(0,0,0,1,[{offset:0,color:"rgb(55, 162, 255)"},{offset:1,color:"rgb(116, 21, 219)"}])},g.setOption(L)})),function(){const e=new EventSource(s("/base-api/subscribe/sysenv"));e.addEventListener("host",T),e.addEventListener("mem",k),e.addEventListener("cpu",A),e.addEventListener("sysLoad",C),e.addEventListener("disk",N),e.addEventListener("go",b),e.addEventListener("host",_)}(),{...d(o),goInfoData:v,hostData:y,loading:c,setOptChart1:O,setOptChart2:F,setOptChart3:z}},created(){},unmounted(){},data:()=>({}),methods:{memorySizeFormat(e){if(null==e)return"";e=parseFloat(e);let t=0,a="Bytes";for(;e>1024&&"TB"!=a;)e/=1024,t++,1==t?a="KB":2==t?a="MB":3==t?a="GB":4==t&&(a="TB");return e.toFixed(2)+" "+a},timeFormat(e){if(!e)return"-";e=parseFloat(e);let t=0,a="秒";for(;e>60&&"小时"!=a&&"天"!=a||e>24&&"小时"==a;)e/="小时"==a?24:60,t++,1==t?a="分":2==t?a="小时":3==t&&(a="天");return e.toFixed(2)+" "+a}}}),w=e=>(_("data-v-04081e8b"),e=e(),I(),e),L={cellspacing:"0",style:{width:"100%"}},O=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"CPU数: ")],-1))),F={"class":"cell-card"},z=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"核心数: ")],-1))),U={"class":"cell-card"},T=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"使用率:")],-1))),k={"class":"cell-card"},A=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"LA5:")],-1))),C={"class":"cell-card"},N=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"LA15:")],-1))),D={"class":"cell-card"},P={style:{"min-height":"180px"},ref:"chartsWarningRef1"},R={cellspacing:"0",style:{width:"100%"}},W=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"内存总数:")],-1))),E={"class":"cell-card"},j=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"已使用:")],-1))),B={"class":"cell-card"},J=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"剩余:")],-1))),$={"class":"cell-card"},G=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"系统使用:")],-1))),V={"class":"cell-card"},M=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"使用率:")],-1))),H={"class":"cell-card"},Z={style:{"min-height":"180px"},ref:"chartsWarningRef2"},K={cellspacing:"0",style:{width:"100%"}},X=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"磁盘容量:")],-1))),Y={"class":"cell-card"},q=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"已使用:")],-1))),Q={"class":"cell-card"},ee=w((()=>h("td",null,[
h("div",{"class":"cell-card"},"使用率:")],-1))),te={"class":"cell-card"},ae={style:{"min-height":"180px"},ref:"chartsWarningRef3"},se=w((()=>h("div",{"class":"card-header"},[
h("span",null,"CPU运行情况")],-1))),le={style:{height:"250px"},ref:"chartsWarningRef4"},oe=w((()=>h("div",{"class":"card-header"},[
h("span",null,"内存运行情况")],-1))),ne={style:{height:"250px"},ref:"chartsWarningRef5"},re=w((()=>h("div",{"class":"card-header"},[
h("span",null,"磁盘使用情况")],-1))),ie={style:{height:"250px"},ref:"chartsWarningRef6"},de={"class":"flex-row gap-2"},ce=w((()=>h("div",{"class":"card-header"},[
h("span",null,"运行环境信息")],-1))),ue={"class":"flex-row"};var fe=a(S,[["render",function(e,t,a,s,l,o){const n=p("el-col"),r=p("el-row"),i=p("el-card"),d=p("el-form-item"),x=p("el-form"),_=g("loading");return c((y(),u("div",null,[f(r,{gutter:15},{"default":m((()=>[f(n,{xs:24,sm:12,md:8,"class":"mb-4"},{"default":m((()=>[f(i,{shadow:"nover","class":"box-card-meter"},{"default":m((()=>[f(r,{gutter:20},{"default":m((()=>[f(n,{xs:24,sm:24,md:12},{"default":m((()=>[h("table",L,[h("tbody",null,[h("tr",null,[O,h("td",null,[h("div",F,v(e.sysInfo.cpuNum),1)])]),h("tr",null,[z,h("td",null,[h("div",U,v(e.sysInfo.cpuCores),1)])]),h("tr",null,[T,h("td",null,[h("div",k,v(e.sysInfo.cpuUsed)+"%",1)])]),h("tr",null,[A,h("td",null,[h("div",C,v(e.sysInfo.cpuAvg5)+"%",1)])]),h("tr",null,[N,h("td",null,[h("div",D,v(e.sysInfo.cpuAvg15)+"%",1)])])])])])),_:1}),f(n,{xs:24,sm:24,md:12},{"default":m((()=>[h("div",P,null,512)])),_:1})])),_:1})])),_:1})])),_:1}),f(n,{xs:24,sm:12,md:8,"class":"mb-4"},{"default":m((()=>[f(i,{shadow:"nover","class":"box-card-meter"},{"default":m((()=>[f(r,{gutter:20},{"default":m((()=>[f(n,{xs:24,sm:24,md:12},{"default":m((()=>[h("table",R,[h("tbody",null,[h("tr",null,[W,h("td",null,[h("div",E,v(e.memorySizeFormat(e.sysInfo.memTotal)),1)])]),h("tr",null,[j,h("td",null,[h("div",B,v(e.memorySizeFormat(e.sysInfo.memUsed)),1)])]),h("tr",null,[J,h("td",null,[h("div",$,v(e.memorySizeFormat(e.sysInfo.available)),1)])]),h("tr",null,[G,h("td",null,[h("div",V,v(e.memorySizeFormat(e.sysInfo.goUsed)),1)])]),h("tr",null,[M,h("td",null,[h("div",H,v(e.sysInfo.memUsage)+"%",1)])])])])])),_:1}),f(n,{xs:24,sm:24,md:12},{"default":m((()=>[h("div",Z,null,512)])),_:1})])),_:1})])),_:1})])),_:1}),f(n,{xs:24,sm:12,md:8,"class":"mb-4"},{"default":m((()=>[f(i,{shadow:"nover","class":"box-card-meter"},{"default":m((()=>[f(r,{gutter:20},{"default":m((()=>[f(n,{xs:24,sm:24,md:12},{"default":m((()=>[h("table",K,[h("tbody",null,[h("tr",null,[X,h("td",null,[h("div",Y,v(e.memorySizeFormat(e.sysInfo.diskTotal)),1)])]),h("tr",null,[q,h("td",null,[h("div",Q,v(e.memorySizeFormat(e.sysInfo.diskUsed)),1)])]),h("tr",null,[ee,h("td",null,[h("div",te,v(e.sysInfo.diskUsedPercent)+"%",1)])])])])])),_:1}),f(n,{xs:24,sm:24,md:12},{"default":m((()=>[h("div",ae,null,512)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),f(r,{gutter:15},{"default":m((()=>[f(n,{xs:24,sm:12,md:8,"class":"mb-4"},{"default":m((()=>[f(i,{shadow:"nover","class":"box-card-height",style:{height:"auto"}},{header:m((()=>[se])),"default":m((()=>[h("div",le,null,512)])),_:1})])),_:1}),f(n,{xs:24,sm:12,md:8,"class":"mb-4"},{"default":m((()=>[f(i,{shadow:"nover","class":"box-card-height",style:{height:"auto"}},{header:m((()=>[oe])),"default":m((()=>[h("div",ne,null,512)])),_:1})])),_:1}),f(n,{xs:24,sm:12,md:8,"class":"mb-4"},{"default":m((()=>[f(i,{shadow:"nover","class":"box-card-height",style:{height:"auto"}},{header:m((()=>[re])),"default":m((()=>[h("div",ie,null,512)])),_:1})])),_:1})])),_:1}),h("div",de,[f(n,{xs:24,sm:24,md:24},{"default":m((()=>[f(i,{shadow:"nover","class":"box-card-height",style:{height:"auto"}},{header:m((()=>[ce])),"default":m((()=>[h("div",ue,[f(x,{"label-position":"right","label-width":"100px","class":"flex1",style:{"max-width":"460px"}},{"default":m((()=>[f(d,{label:"操作系统"},{"default":m((()=>[b(v(e.hostData.os),1)])),_:1}),f(d,{label:"启动时间"},{"default":m((()=>[b(v(e.goInfoData.startTime),1)])),_:1}),f(d,{label:"运行时长"},{"default":m((()=>[b(v(e.timeFormat(e.goInfoData.runTime)),1)])),_:1}),f(d,{label:"运行内存"},{"default":m((()=>[b(v(e.goInfoData.goMem),1)])),_:1})])),_:1}),f(x,{"label-position":"right","label-width":"100px","class":"flex1",style:{"max-width":"460px"}},{"default":m((()=>[f(d,{label:"系统架构"},{"default":m((()=>[b(v(e.goInfoData.arch),1)])),_:1}),f(d,{label:"语言环境"},{"default":m((()=>[b(v(e.goInfoData.goName),1)])),_:1}),f(d,{label:"磁盘占用"},{"default":m((()=>[b(v(e.goInfoData.goSize),1)])),_:1}),f(d,{label:"项目地址"},{"default":m((()=>[b(v(e.goInfoData.pwd),1)])),_:1})])),_:1}),f(x,{"label-position":"right","label-width":"100px","class":"flex1",style:{"max-width":"460px"}},{"default":m((()=>[f(d,{label:"架构版本"},{"default":m((()=>[b(v(e.hostData.kernelArch),1)])),_:1}),f(d,{label:"GO 版本"},{"default":m((()=>[b(v(e.goInfoData.goVersion),1)])),_:1}),f(d,{label:"协程数量"},{"default":m((()=>[b(v(e.goInfoData.goroutine),1)])),_:1}),f(d,{label:"服务器IP"},{"default":m((()=>[b(v(e.hostData.intranet_ip)+" (内)     "+v(e.hostData.public_ip)+" (公) ",1)])),_:1})])),_:1})])])),_:1})])),_:1})])])),[[_,e.loading]])}],["__scopeId","data-v-04081e8b"]]);export{fe as default};