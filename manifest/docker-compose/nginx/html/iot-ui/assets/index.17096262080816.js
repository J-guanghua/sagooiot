import{d as s,l as e,a,aC as t,aE as o,j as r,o as n,aA as i,aB as u,b as l}from"./vue.1709626208081.js";import{_ as c,d,b as p,L as y,S as m,i as f,e as g,E as h,u as v,f as I}from"./index.1709626208081.js";const S=s({components:{},data:function(){return{dayjs:d,sysinfo:{buildVersion:"",systemName:"",buildTime:"",systemCopyright:"",systemLogo:"",systemLoginPIC:""}}},mounted(){this.sysinfo=JSON.parse(localStorage.sysinfo||"{}")},setup(){const s=t(),a=o(),n=v(),{proxy:i}=r();e((()=>I(new Date))),p.login.oauth({code:location.search.split("=")[1],types:s.params.type,state:""}).then((async s=>{localStorage.setItem("token",s.token);const e=s.userInfo;e.avatar=i.getUpFileUrl(e.avatar),y.set("userInfo",e),m.set("userInfo",e),await n.dispatch("userInfos/setUserInfos",e),u()}));const u=async()=>{p.login.currentUser().then((async s=>{localStorage.setItem("userId",s.Info.id),m.set("userMenu",s.Data||[]),n.dispatch("requestOldRoutes/setBackEndControlRoutes",s||[]),n.state.themeConfig.themeConfig.isRequestRoutes?(await g(),l()):(await f(),l())}))},l=()=>{var e,t,o,r;const n=JSON.parse(localStorage.sysinfo||"{}"),i=a.getRoutes().find((s=>"/"===s.path));i&&(i.redirect=n.systemHomePageRoute||"/home"),(null==(e=s.query)?void 0:e.redirect)?a.push({path:null==(t=s.query)?void 0:t.redirect,query:s.query.params&&Object.keys(null==(o=s.query)?void 0:o.params).length>0?JSON.parse(null==(r=s.query)?void 0:r.params):""}):a.push("/"),h.success("登录成功")};return{}}}),q={"class":"login-container flex-row"},C=[(s=>(i("data-v-160243da"),s=s(),u(),s))((()=>l("div",{"class":"part"},[
l("div",{"class":"title"},"SSO")],-1)))];var O=c(S,[["render",function(s,e,t,o,r,i){return n(),a("div",q,C)}],["__scopeId","data-v-160243da"]]);export{O as default};