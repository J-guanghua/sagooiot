import{a as e}from"./index.170962620808122.js";import{_ as l,E as a}from"./index.1709626208081.js";import{d as o,h as t,a1 as u,aa as d,a as r,Y as p,S as m,e as n,ah as s,o as i,b as y,W as c,X as g,F as h,a7 as f,R as b,V}from"./vue.1709626208081.js";const v=o({name:"deviceEditPro",setup(l,{emit:o}){const r=t(null),p=u({isShowDialog:!1,typeData:[],type:"",valueType:{type:"",maxLength:""},ruleForm:{name:"",key:"",transportProtocol:"",accessMode:"0",status:1,valueType:{type:"",maxLength:""},desc:""},rules:{name:[{required:!0,message:"事件定义名称不能为空",trigger:"blur"}],key:[{required:!0,message:"事件定义标识不能为空",trigger:"blur"}],accessMode:[{required:!0,message:"请选择是否只读",trigger:"blur"}]}}),m=()=>{p.ruleForm={id:0,name:"",dictType:"",status:1,desc:""}},s=()=>{p.isShowDialog=!1};return{openDialog:l=>{m(),e.product.getDataType({status:-1}).then((e=>{const l=Object.values(e.dataType);l.forEach(((e,a)=>{0==a?(l[a].label="基础类型",l[a].options=e):(l[a].label="扩展类型",l[a].options=e)})),p.typeData=l||[]})),l&&(p.ruleForm=l),p.isShowDialog=!0},seletChange:e=>{p.type=e},closeDialog:s,onCancel:()=>{s()},onSubmit:()=>{const l=n(r);l&&l.validate((l=>{l&&(0!==p.ruleForm.id?e.product.edit(p.ruleForm).then((()=>{a.success("事件定义类型修改成功"),s(),o("typeList")})):(p.ruleForm.valueType=p.valueType,e.model.eventadd(p.ruleForm).then((()=>{a.success("事件定义类型添加成功"),s(),o("typeList")}))))}))},formRef:r,...d(p)}}}),_={"class":"system-edit-dic-container"},x={"class":"dialog-footer"};var F=l(v,[["render",function(e,l,a,o,t,u){const d=s("el-input"),n=s("el-form-item"),v=s("el-radio"),F=s("el-radio-group"),T=s("el-option"),L=s("el-option-group"),k=s("el-select"),D=s("el-form"),C=s("el-button"),U=s("el-dialog");return i(),r("div",_,[p(U,{title:(0!==e.ruleForm.id?"修改":"添加")+"事件定义",modelValue:e.isShowDialog,"onUpdate:modelValue":l[9]||(l[9]=l=>e.isShowDialog=l),width:"769px"},{footer:m((()=>[y("span",x,[p(C,{onClick:e.onCancel},{"default":m((()=>[c("取 消")])),_:1},8,["onClick"]),p(C,{type:"primary",onClick:e.onSubmit},{"default":m((()=>[c(g(0!==e.ruleForm.id?"修 改":"添 加"),1)])),_:1},8,["onClick"])])])),"default":m((()=>[p(D,{model:e.ruleForm,ref:"formRef",rules:e.rules,"label-width":"120px"},{"default":m((()=>[p(n,{label:"事件定义标识",prop:"key"},{"default":m((()=>[p(d,{modelValue:e.ruleForm.key,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.key=l),placeholder:"请输入事件定义标识"},null,8,["modelValue"])])),_:1}),p(n,{label:"事件定义名称",prop:"name"},{"default":m((()=>[p(d,{modelValue:e.ruleForm.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.name=l),placeholder:"请输入事件定义名称"},null,8,["modelValue"])])),_:1}),p(n,{label:"事件级别",prop:"level"},{"default":m((()=>[p(F,{modelValue:e.ruleForm.level,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.level=l),"model-value":"0"},{"default":m((()=>[p(v,{label:"0"},{"default":m((()=>[c("普通")])),_:1}),p(v,{label:"1"},{"default":m((()=>[c("警告")])),_:1}),p(v,{label:"2"},{"default":m((()=>[c("紧急")])),_:1})])),_:1},8,["modelValue"])])),_:1}),p(n,{label:"输出参数",prop:"type"},{"default":m((()=>[p(k,{modelValue:e.valueType.type,"onUpdate:modelValue":l[3]||(l[3]=l=>e.valueType.type=l),placeholder:"请选择输出参数",onChange:e.seletChange},{"default":m((()=>[(i(!0),r(h,null,f(e.typeData,(e=>(i(),b(L,{key:e.label,label:e.label},{"default":m((()=>[(i(!0),r(h,null,f(e.options,(e=>(i(),b(T,{key:e.type,label:e.title,value:e.type},null,8,["label","value"])))),128))])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),"float"==e.type||"double"==e.type?(i(),b(n,{key:0,label:"精度",prop:"maxLength1"},{"default":m((()=>[p(d,{modelValue:e.valueType.maxLength1,"onUpdate:modelValue":l[4]||(l[4]=l=>e.valueType.maxLength1=l),placeholder:"请输入精度"},null,8,["modelValue"])])),_:1})):V("",!0),"int"==e.type||"long"==e.type||"float"==e.type||"double"==e.type?(i(),b(n,{key:1,label:"单位",prop:"maxLength"},{"default":m((()=>[p(d,{modelValue:e.valueType.maxLength,"onUpdate:modelValue":l[5]||(l[5]=l=>e.valueType.maxLength=l),placeholder:"请输入单位"},null,8,["modelValue"])])),_:1})):V("",!0),"string"==e.type?(i(),b(n,{key:2,label:"最大长度",prop:"maxLength"},{"default":m((()=>[p(d,{modelValue:e.valueType.maxLength,"onUpdate:modelValue":l[6]||(l[6]=l=>e.valueType.maxLength=l),placeholder:"请输入最大长度"},null,8,["modelValue"])])),_:1})):V("",!0),"date"==e.type?(i(),b(n,{key:3,label:"时间格式",prop:"maxLength"},{"default":m((()=>[p(d,{modelValue:e.valueType.maxLength,"onUpdate:modelValue":l[7]||(l[7]=l=>e.valueType.maxLength=l),placeholder:"请输入时间格式"},null,8,["modelValue"])])),_:1})):V("",!0),p(n,{label:"事件定义描述\t",prop:"desc"},{"default":m((()=>[p(d,{modelValue:e.ruleForm.desc,"onUpdate:modelValue":l[8]||(l[8]=l=>e.ruleForm.desc=l),type:"textarea",placeholder:"请输入事件定义描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}],["__scopeId","data-v-862ab9a4"]]);export{F as default};