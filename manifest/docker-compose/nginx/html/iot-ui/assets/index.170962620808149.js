import{d as a,h as e,a1 as l,k as t,aa as o,R as n,S as i,j as r,ah as d,ar as p,o as s,Y as u,a8 as m,W as c,T as g,Z as b}from"./vue.1709626208081.js";import{_ as f,b as h,E as w,h as D}from"./index.1709626208081.js";import{d as y}from"./download.1709626208081.js";var _=f(a({name:"apiV1SystemLoginLogList",setup(){const{proxy:a}=r(),n=e(),{admin_login_status:i}=a.useDict("admin_login_status"),d=l({ids:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,dateRange:[],status:-1,ipaddr:"",loginLocation:"",userName:""}}}),p=()=>{d.tableData.loading=!0,h.log.getList(d.tableData.param).then((a=>{d.tableData.data=a.list,d.tableData.total=a.total}))["finally"]((()=>{d.tableData.loading=!1}))};t((()=>{p()}));return{queryRef:n,onRowDel:a=>{let e="你确定要删除所选数据？",l=[];a?(e=`此操作将永久删除：“${a.loginName}”，是否继续?`,l=[a.infoId]):l=d.ids,0!==l.length?D.confirm(e,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",beforeClose:(a,e,t)=>{"confirm"===a?(e.confirmButtonLoading=!0,e.confirmButtonText="删除中",h.log.del(l).then((()=>{w.success("删除成功"),p(),t()}))):t()}})["catch"]((()=>{})):w.error("请选择要删除的数据。")},onRowExport:()=>{h.log["export"]({...d.tableData.param}).then((a=>y(a)))},dataList:p,resetQuery:a=>{a&&(a.resetFields(),p())},handleSelectionChange:a=>{d.ids=a.map((a=>a.infoId))},onRowClear:()=>{D.confirm("你确定要删除所选数据？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{h.log.clearLog().then((()=>{w.success("清除成功"),p()}))}))["catch"]((()=>{}))},admin_login_status:i,...o(d)}}}),[["render",function(a,e,l,t,o,r){const f=d("el-input"),h=d("el-form-item"),w=d("el-option"),D=d("el-select"),y=d("el-date-picker"),_=d("ele-Search"),L=d("el-icon"),x=d("el-button"),V=d("ele-Delete"),v=d("ele-Download"),R=d("el-form"),C=d("el-table-column"),S=d("el-tag"),k=d("el-table"),T=d("pagination"),B=d("el-card"),N=p("auth"),U=p("col"),z=p("loading");return s(),n(B,{shadow:"nover","class":"page"},{"default":i((()=>[u(R,{model:a.tableData.param,ref:"queryRef",inline:""},{"default":i((()=>[u(h,{label:"",prop:"ipaddr"},{"default":i((()=>[u(f,{modelValue:a.tableData.param.ipaddr,"onUpdate:modelValue":e[0]||(e[0]=e=>a.tableData.param.ipaddr=e),placeholder:"登录IP",clearable:"",style:{width:"150px"},onKeyup:m(a.dataList,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),u(h,{label:"",prop:"loginLocation"},{"default":i((()=>[u(f,{modelValue:a.tableData.param.loginLocation,"onUpdate:modelValue":e[1]||(e[1]=e=>a.tableData.param.loginLocation=e),placeholder:"登录地点",clearable:"",style:{width:"150px"},onKeyup:m(a.dataList,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),u(h,{label:"",prop:"status"},{"default":i((()=>[u(D,{modelValue:a.tableData.param.status,"onUpdate:modelValue":e[2]||(e[2]=e=>a.tableData.param.status=e),placeholder:"状态",style:{width:"75px"}},{"default":i((()=>[u(w,{label:"全部",value:-1}),u(w,{label:"成功",value:1}),u(w,{label:"失败",value:0})])),_:1},8,["modelValue"])])),_:1}),u(h,{label:"",prop:"dateRange"},{"default":i((()=>[u(y,{modelValue:a.tableData.param.dateRange,"onUpdate:modelValue":e[3]||(e[3]=e=>a.tableData.param.dateRange=e),style:{width:"220px"},"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"登录时间","end-placeholder":"结束时间"},null,8,["modelValue"])])),_:1}),u(h,null,{"default":i((()=>[u(x,{type:"primary",onClick:a.dataList},{"default":i((()=>[u(L,null,{"default":i((()=>[u(_)])),_:1}),c(" 查询 ")])),_:1},8,["onClick"]),g((s(),n(x,{type:"info",onClick:e[4]||(e[4]=e=>a.onRowDel(null))},{"default":i((()=>[u(L,null,{"default":i((()=>[u(V)])),_:1}),c(" 删除日志 ")])),_:1})),[[N,"del"]]),u(x,{type:"primary",onClick:e[5]||(e[5]=e=>a.onRowExport())},{"default":i((()=>[u(L,null,{"default":i((()=>[u(v)])),_:1}),c(" 导出日志 ")])),_:1})])),_:1})])),_:1},8,["model"]),g((s(),n(k,{data:a.tableData.data,style:{width:"100%"},onSelectionChange:a.handleSelectionChange},{"default":i((()=>[u(C,{type:"selection",width:"50",align:"center"}),u(C,{label:"编号",align:"center",width:"90",prop:"infoId"}),u(C,{label:"登录名称",align:"center",prop:"loginName"}),u(C,{label:"登录地址",align:"center",prop:"ipaddr",width:"145","show-overflow-tooltip":""}),g(u(C,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":""},null,512),[[U,"loginLocation"]]),u(C,{label:"浏览器",align:"center",prop:"browser"}),u(C,{label:"操作系统","show-overflow-tooltip":"",align:"center",prop:"os"}),g((s(),n(C,{label:"登录状态",align:"center",prop:"status",width:"90"},{"default":i((a=>[1===a.row.status?(s(),n(S,{key:0,type:"success",size:"small"},{"default":i((()=>[c("成功")])),_:1})):(s(),n(S,{key:1,type:"info",size:"small"},{"default":i((()=>[c("失败")])),_:1}))])),_:1})),[[U,"status"]]),g(u(C,{label:"操作信息","show-overflow-tooltip":"",prop:"msg",align:"center"},null,512),[[U,"msg"]]),g(u(C,{label:"登录日期",align:"center",prop:"loginTime",width:"160"},null,512),[[U,"loginTime"]]),g(u(C,{label:"登录模块",align:"center","show-overflow-tooltip":"",prop:"module",width:"120"},null,512),[[U,"module"]])])),_:1},8,["data","onSelectionChange"])),[[z,a.tableData.loading]]),g(u(T,{total:a.tableData.total,page:a.tableData.param.pageNum,"onUpdate:page":e[6]||(e[6]=e=>a.tableData.param.pageNum=e),limit:a.tableData.param.pageSize,"onUpdate:limit":e[7]||(e[7]=e=>a.tableData.param.pageSize=e),onPagination:a.dataList},null,8,["total","page","limit","onPagination"]),[[b,a.tableData.total>0]])])),_:1})}]]);export{_ as default};